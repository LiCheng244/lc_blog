<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>开发中的代码规范 | LiCheng</title>
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="Hello, my friend!">
    <link rel="preload" href="/assets/css/0.styles.da8a643d.css" as="style"><link rel="preload" href="/assets/js/app.3cc41685.js" as="script"><link rel="preload" href="/assets/js/2.88e857c4.js" as="script"><link rel="preload" href="/assets/js/82.be168e2f.js" as="script"><link rel="prefetch" href="/assets/js/10.e622f9df.js"><link rel="prefetch" href="/assets/js/100.aa11342e.js"><link rel="prefetch" href="/assets/js/101.b6ba6786.js"><link rel="prefetch" href="/assets/js/102.aee88770.js"><link rel="prefetch" href="/assets/js/103.e3bed9d6.js"><link rel="prefetch" href="/assets/js/104.7fb58fef.js"><link rel="prefetch" href="/assets/js/105.2bbc6f8b.js"><link rel="prefetch" href="/assets/js/106.7131f70e.js"><link rel="prefetch" href="/assets/js/107.e131f724.js"><link rel="prefetch" href="/assets/js/108.134a7065.js"><link rel="prefetch" href="/assets/js/109.53c3005c.js"><link rel="prefetch" href="/assets/js/11.eb2cf403.js"><link rel="prefetch" href="/assets/js/110.af604ae0.js"><link rel="prefetch" href="/assets/js/111.76857753.js"><link rel="prefetch" href="/assets/js/112.592042ab.js"><link rel="prefetch" href="/assets/js/113.91284aad.js"><link rel="prefetch" href="/assets/js/114.edd76581.js"><link rel="prefetch" href="/assets/js/115.3401d408.js"><link rel="prefetch" href="/assets/js/116.b9f128af.js"><link rel="prefetch" href="/assets/js/117.7e56c440.js"><link rel="prefetch" href="/assets/js/118.88dd1e30.js"><link rel="prefetch" href="/assets/js/119.65f9a60d.js"><link rel="prefetch" href="/assets/js/12.a0321ad2.js"><link rel="prefetch" href="/assets/js/120.1afec095.js"><link rel="prefetch" href="/assets/js/121.bfc2d8f2.js"><link rel="prefetch" href="/assets/js/122.10d5d2a4.js"><link rel="prefetch" href="/assets/js/123.f4a972c8.js"><link rel="prefetch" href="/assets/js/124.37bdbba3.js"><link rel="prefetch" href="/assets/js/125.68180308.js"><link rel="prefetch" href="/assets/js/126.3b5d2b5c.js"><link rel="prefetch" href="/assets/js/127.a7d3d8e1.js"><link rel="prefetch" href="/assets/js/128.1acde837.js"><link rel="prefetch" href="/assets/js/129.9fd5f6ac.js"><link rel="prefetch" href="/assets/js/13.7f0501e6.js"><link rel="prefetch" href="/assets/js/130.eb73cb00.js"><link rel="prefetch" href="/assets/js/131.781fb00d.js"><link rel="prefetch" href="/assets/js/132.c822ac01.js"><link rel="prefetch" href="/assets/js/133.77adbd42.js"><link rel="prefetch" href="/assets/js/134.833a5179.js"><link rel="prefetch" href="/assets/js/135.3d3f775f.js"><link rel="prefetch" href="/assets/js/136.e9323672.js"><link rel="prefetch" href="/assets/js/137.b8c3452d.js"><link rel="prefetch" href="/assets/js/138.82301b0a.js"><link rel="prefetch" href="/assets/js/139.1cc7cde9.js"><link rel="prefetch" href="/assets/js/14.fe6c6b4e.js"><link rel="prefetch" href="/assets/js/140.897651d6.js"><link rel="prefetch" href="/assets/js/141.b1963922.js"><link rel="prefetch" href="/assets/js/142.69985a38.js"><link rel="prefetch" href="/assets/js/143.722b0fc0.js"><link rel="prefetch" href="/assets/js/144.2c3f2a77.js"><link rel="prefetch" href="/assets/js/145.2bea6a75.js"><link rel="prefetch" href="/assets/js/146.aae6e5d2.js"><link rel="prefetch" href="/assets/js/147.db98144e.js"><link rel="prefetch" href="/assets/js/148.687c4d50.js"><link rel="prefetch" href="/assets/js/149.98dedead.js"><link rel="prefetch" href="/assets/js/15.869c0b4b.js"><link rel="prefetch" href="/assets/js/150.e8d3685f.js"><link rel="prefetch" href="/assets/js/151.ee250606.js"><link rel="prefetch" href="/assets/js/152.e812a324.js"><link rel="prefetch" href="/assets/js/153.1b0aa772.js"><link rel="prefetch" href="/assets/js/154.492d591e.js"><link rel="prefetch" href="/assets/js/155.9b0f161f.js"><link rel="prefetch" href="/assets/js/156.fc8f03de.js"><link rel="prefetch" href="/assets/js/157.a3ab373f.js"><link rel="prefetch" href="/assets/js/158.99c96f1d.js"><link rel="prefetch" href="/assets/js/159.c9e47fd7.js"><link rel="prefetch" href="/assets/js/16.d48bc043.js"><link rel="prefetch" href="/assets/js/160.ce806674.js"><link rel="prefetch" href="/assets/js/161.6f860ed5.js"><link rel="prefetch" href="/assets/js/162.389853a9.js"><link rel="prefetch" href="/assets/js/163.5a3b6b70.js"><link rel="prefetch" href="/assets/js/164.f5785ab5.js"><link rel="prefetch" href="/assets/js/165.7e554595.js"><link rel="prefetch" href="/assets/js/166.658f68d9.js"><link rel="prefetch" href="/assets/js/167.fe077d72.js"><link rel="prefetch" href="/assets/js/168.26b60f89.js"><link rel="prefetch" href="/assets/js/17.e205741f.js"><link rel="prefetch" href="/assets/js/18.414f5ab4.js"><link rel="prefetch" href="/assets/js/19.4a073bd9.js"><link rel="prefetch" href="/assets/js/20.c41c9347.js"><link rel="prefetch" href="/assets/js/21.65a24ffd.js"><link rel="prefetch" href="/assets/js/22.ad7c71b2.js"><link rel="prefetch" href="/assets/js/23.836d9992.js"><link rel="prefetch" href="/assets/js/24.b766cddd.js"><link rel="prefetch" href="/assets/js/25.76cd9d79.js"><link rel="prefetch" href="/assets/js/26.537b6445.js"><link rel="prefetch" href="/assets/js/27.a65546c6.js"><link rel="prefetch" href="/assets/js/28.b1f5b909.js"><link rel="prefetch" href="/assets/js/29.8d072047.js"><link rel="prefetch" href="/assets/js/3.e129d1fb.js"><link rel="prefetch" href="/assets/js/30.c11d2de9.js"><link rel="prefetch" href="/assets/js/31.afc55515.js"><link rel="prefetch" href="/assets/js/32.b3958b92.js"><link rel="prefetch" href="/assets/js/33.090ba32a.js"><link rel="prefetch" href="/assets/js/34.6336f0c1.js"><link rel="prefetch" href="/assets/js/35.f1bb4381.js"><link rel="prefetch" href="/assets/js/36.6fdce99f.js"><link rel="prefetch" href="/assets/js/37.35ce3097.js"><link rel="prefetch" href="/assets/js/38.6c9b0b5a.js"><link rel="prefetch" href="/assets/js/39.c1be603b.js"><link rel="prefetch" href="/assets/js/4.de79c443.js"><link rel="prefetch" href="/assets/js/40.7c0c96df.js"><link rel="prefetch" href="/assets/js/41.7eff39e8.js"><link rel="prefetch" href="/assets/js/42.0e94d8e6.js"><link rel="prefetch" href="/assets/js/43.93268bf6.js"><link rel="prefetch" href="/assets/js/44.35ef7f19.js"><link rel="prefetch" href="/assets/js/45.c60a5e02.js"><link rel="prefetch" href="/assets/js/46.f814856d.js"><link rel="prefetch" href="/assets/js/47.7df24622.js"><link rel="prefetch" href="/assets/js/48.ae90e821.js"><link rel="prefetch" href="/assets/js/49.c986c8c9.js"><link rel="prefetch" href="/assets/js/5.3d081717.js"><link rel="prefetch" href="/assets/js/50.5b506cef.js"><link rel="prefetch" href="/assets/js/51.336a6ea1.js"><link rel="prefetch" href="/assets/js/52.ecc7d601.js"><link rel="prefetch" href="/assets/js/53.9b4cc71d.js"><link rel="prefetch" href="/assets/js/54.a65cc2d8.js"><link rel="prefetch" href="/assets/js/55.412e2105.js"><link rel="prefetch" href="/assets/js/56.3412fc76.js"><link rel="prefetch" href="/assets/js/57.5e7132e4.js"><link rel="prefetch" href="/assets/js/58.5ed4ccf1.js"><link rel="prefetch" href="/assets/js/59.1cf9de3f.js"><link rel="prefetch" href="/assets/js/6.a28428d3.js"><link rel="prefetch" href="/assets/js/60.d151225f.js"><link rel="prefetch" href="/assets/js/61.75113a9a.js"><link rel="prefetch" href="/assets/js/62.3cd1c918.js"><link rel="prefetch" href="/assets/js/63.f6d1121c.js"><link rel="prefetch" href="/assets/js/64.ea6abff1.js"><link rel="prefetch" href="/assets/js/65.16d8c5f5.js"><link rel="prefetch" href="/assets/js/66.b9464fe6.js"><link rel="prefetch" href="/assets/js/67.2849490a.js"><link rel="prefetch" href="/assets/js/68.14750ec1.js"><link rel="prefetch" href="/assets/js/69.8a52ac3d.js"><link rel="prefetch" href="/assets/js/7.f1b7b4a5.js"><link rel="prefetch" href="/assets/js/70.458e8d68.js"><link rel="prefetch" href="/assets/js/71.a5465cdc.js"><link rel="prefetch" href="/assets/js/72.139daf32.js"><link rel="prefetch" href="/assets/js/73.5532a6c1.js"><link rel="prefetch" href="/assets/js/74.c8d883a2.js"><link rel="prefetch" href="/assets/js/75.6e049f68.js"><link rel="prefetch" href="/assets/js/76.b3747a79.js"><link rel="prefetch" href="/assets/js/77.1fbd1179.js"><link rel="prefetch" href="/assets/js/78.2edbfe7b.js"><link rel="prefetch" href="/assets/js/79.ae067b07.js"><link rel="prefetch" href="/assets/js/8.4c8eb861.js"><link rel="prefetch" href="/assets/js/80.c5a05a54.js"><link rel="prefetch" href="/assets/js/81.97d8b0c2.js"><link rel="prefetch" href="/assets/js/83.544dd293.js"><link rel="prefetch" href="/assets/js/84.590e5742.js"><link rel="prefetch" href="/assets/js/85.243bdd80.js"><link rel="prefetch" href="/assets/js/86.7ea5361a.js"><link rel="prefetch" href="/assets/js/87.f2038a44.js"><link rel="prefetch" href="/assets/js/88.53632be6.js"><link rel="prefetch" href="/assets/js/89.15773f94.js"><link rel="prefetch" href="/assets/js/9.a126191e.js"><link rel="prefetch" href="/assets/js/90.241d0c60.js"><link rel="prefetch" href="/assets/js/91.cc3efa05.js"><link rel="prefetch" href="/assets/js/92.d943df14.js"><link rel="prefetch" href="/assets/js/93.fb81efa6.js"><link rel="prefetch" href="/assets/js/94.b47feb8c.js"><link rel="prefetch" href="/assets/js/95.025f0194.js"><link rel="prefetch" href="/assets/js/96.c1e705a8.js"><link rel="prefetch" href="/assets/js/97.4f9796dd.js"><link rel="prefetch" href="/assets/js/98.360adb88.js"><link rel="prefetch" href="/assets/js/99.ae4f6e35.js">
    <link rel="stylesheet" href="/assets/css/0.styles.da8a643d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/favicon.ico" alt="LiCheng" class="logo"> <span class="site-name can-hide">LiCheng</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/ios/" class="nav-link router-link-active">
  iOS
</a></div><div class="nav-item"><a href="/game/" class="nav-link">
  游戏
</a></div><div class="nav-item"><a href="/essay/" class="nav-link">
  好文
</a></div><div class="nav-item"><a href="https://github.com/LiCheng244/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/ios/" class="nav-link router-link-active">
  iOS
</a></div><div class="nav-item"><a href="/game/" class="nav-link">
  游戏
</a></div><div class="nav-item"><a href="/essay/" class="nav-link">
  好文
</a></div><div class="nav-item"><a href="https://github.com/LiCheng244/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/ios/00基础知识/" class="sidebar-heading clickable open"><span>基础知识</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ios/00基础知识/1970.html" class="sidebar-link">时间要从1970年1月1日开始算起？</a></li><li><a href="/ios/00基础知识/代码规范.html" class="active sidebar-link">开发中的代码规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ios/00基础知识/代码规范.html#一-代码格式" class="sidebar-link">一. 代码格式</a></li><li class="sidebar-sub-header"><a href="/ios/00基础知识/代码规范.html#二-命名规范" class="sidebar-link">二. 命名规范</a></li><li class="sidebar-sub-header"><a href="/ios/00基础知识/代码规范.html#三-注释" class="sidebar-link">三. 注释</a></li><li class="sidebar-sub-header"><a href="/ios/00基础知识/代码规范.html#四-编码风格" class="sidebar-link">四. 编码风格</a></li></ul></li><li><a href="/ios/00基础知识/开发流程.html" class="sidebar-link">移动终端开发工作流程</a></li><li><a href="/ios/00基础知识/知识架构.html" class="sidebar-link">入行知识架构图</a></li><li><a href="/ios/00基础知识/沙盒机制.html" class="sidebar-link">关于沙盒机制(sandBox)</a></li><li><a href="/ios/00基础知识/四层系统架构.html" class="sidebar-link">系统架构及常用框架</a></li><li><a href="/ios/00基础知识/正则表达式.html" class="sidebar-link">关于正则表达式</a></li><li><a href="/ios/00基础知识/App生命周期.html" class="sidebar-link">APP 的生命周期</a></li><li><a href="/ios/00基础知识/Controller生命周期.html" class="sidebar-link">ViewController 的生命周期</a></li><li><a href="/ios/00基础知识/mac快捷键.html" class="sidebar-link">MAC 快捷键大全</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/01OC知识/" class="sidebar-heading clickable"><span>OC知识</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/02UI知识/" class="sidebar-heading clickable"><span>UI知识</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/03数据存储/" class="sidebar-heading clickable"><span>数据存储</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/04网络/" class="sidebar-heading clickable"><span>网络</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/05多线程/" class="sidebar-heading clickable"><span>多线程</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/06设计模式/" class="sidebar-heading clickable"><span>设计模式</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/07支付相关/" class="sidebar-heading clickable"><span>支付相关</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/08动画绘图/" class="sidebar-heading clickable"><span>动画绘图</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/09性能优化/" class="sidebar-heading clickable"><span>性能优化</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/10高级技术/" class="sidebar-heading clickable"><span>高级技术</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/11项目配置/" class="sidebar-heading clickable"><span>项目配置</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/12错误收集/" class="sidebar-heading clickable"><span>错误收集</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/13第三方库/" class="sidebar-heading clickable"><span>第三方库</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/14多媒体/" class="sidebar-heading clickable"><span>多媒体</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/15功能封装/" class="sidebar-heading clickable"><span>功能封装</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/16混合开发/" class="sidebar-heading clickable"><span>混合开发</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/17系统适配/" class="sidebar-heading clickable"><span>系统适配</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/18项目总结/" class="sidebar-heading clickable"><span>项目总结</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/19安全攻防/" class="sidebar-heading clickable"><span>安全攻防</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/20开发工具/" class="sidebar-heading clickable"><span>开发工具</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/ios/21%E4%BA%A7%E5%93%81%E8%AE%BE%E8%AE%A1/" class="sidebar-link">产品设计</a></li><li><a href="/ios/22Swift%E5%BC%80%E5%8F%91/" class="sidebar-link">Swift开发</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/ios/23面试题/" class="sidebar-heading clickable"><span>面试题</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1>开发中的代码规范</h1> <br> <div class="custom-block tip"><p class="custom-block-title">引言:</p> <p>Objective-C 是一门面向对象的动态编程语言，主要用于编写 iOS 和 Mac 应用程序。关于 Objective-C 的编码规范，苹果和谷歌都已经有很好的总结：</p> <ul><li><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html" target="_blank" rel="noopener noreferrer">Apple Coding Guidelines for Cocoa<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://google-styleguide.googlecode.com/svn/trunk/objcguide.xml?showone=Line_Length#Line_Length" target="_blank" rel="noopener noreferrer">Google Objective-C Style Guide<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>本文主要整合了对上述文档的翻译、作者自己的编程经验和其他的相关资料，为公司总结出一份通用的编码规范。</p></div> <br> <h2 id="一-代码格式"><a href="#一-代码格式" class="header-anchor">#</a> 一. 代码格式</h2> <h3 id="_1-使用空格而不是制表符tab"><a href="#_1-使用空格而不是制表符tab" class="header-anchor">#</a> 1. 使用空格而不是制表符Tab</h3> <p>不要在工程里使用Tab键，使用空格来进行缩进。在<code>Xcode &gt; Preferences &gt; Text Editing</code>将Tab和自动缩进都设置为<strong>4</strong>个空格。（<em>Google的标准是使用两个空格来缩进，但这里还是推荐使用Xcode默认的设置。</em>）</p> <h3 id="_2-每一行的最大长度"><a href="#_2-每一行的最大长度" class="header-anchor">#</a> 2. 每一行的最大长度</h3> <p>同样的，在<code>Xcode &gt; Preferences &gt; Text Editing &gt; Page guide at column:</code>中将最大行长设置为<strong>80</strong>，过长的一行代码将会导致可读性问题。</p> <h3 id="_3-函数的书写"><a href="#_3-函数的书写" class="header-anchor">#</a> 3. 函数的书写</h3> <p>一个典型的Objective-C函数应该是这样的：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>writeVideoFrameWithData<span class="token punctuation">:</span><span class="token punctuation">(</span>NSData <span class="token operator">*</span><span class="token punctuation">)</span>frameData timeStamp<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>timeStamp <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在<code>-</code>和<code>(void)</code>之间应该有一个空格，第一个大括号<code>{</code>的位置在函数所在行的末尾，同样应该有一个空格。（<em>我司的C语言规范要求是第一个大括号单独占一行，但考虑到OC较长的函数名和苹果SDK代码的风格，还是将大括号放在行末。</em>）</p> <p>如果一个函数有特别多的参数或者名称很长，应该将其按照<code>:</code>来对齐分行显示：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token operator">-</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>initWithModel<span class="token punctuation">:</span><span class="token punctuation">(</span>IPCModle<span class="token punctuation">)</span>model
       ConnectType<span class="token punctuation">:</span><span class="token punctuation">(</span>IPCConnectType<span class="token punctuation">)</span>connectType
        Resolution<span class="token punctuation">:</span><span class="token punctuation">(</span>IPCResolution<span class="token punctuation">)</span>resolution
          AuthName<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>authName
          Password<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>password
               MAC<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>mac
              AzIp<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>az_ip
             AzDns<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>az_dns
             Token<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>token
             Email<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>email
          Delegate<span class="token punctuation">:</span><span class="token punctuation">(</span>id<span class="token operator">&lt;</span>IPCConnectHandlerDelegate<span class="token operator">&gt;</span><span class="token punctuation">)</span>delegate<span class="token punctuation">;</span>
</code></pre></div><p>在分行时，如果第一段名称过短，后续名称可以以Tab的长度（4个空格）为单位进行缩进：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token keyword">short</span><span class="token punctuation">:</span><span class="token punctuation">(</span>GTMFoo <span class="token operator">*</span><span class="token punctuation">)</span>theFoo
        longKeyword<span class="token punctuation">:</span><span class="token punctuation">(</span>NSRect<span class="token punctuation">)</span>theRect
  evenLongerKeyword<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>theInterval
              error<span class="token punctuation">:</span><span class="token punctuation">(</span>NSError <span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span>theError <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-函数调用"><a href="#_4-函数调用" class="header-anchor">#</a> 4. 函数调用</h3> <p>函数调用的格式和书写差不多，可以按照函数的长短来选择写在一行或者分成多行：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//写在一行</span>
<span class="token punctuation">[</span>myObject doFooWith<span class="token punctuation">:</span>arg1 name<span class="token punctuation">:</span>arg2 error<span class="token punctuation">:</span>arg3<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//分行写，按照':'对齐</span>
<span class="token punctuation">[</span>myObject doFooWith<span class="token punctuation">:</span>arg1
               name<span class="token punctuation">:</span>arg2
              error<span class="token punctuation">:</span>arg3<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//第一段名称过短的话后续可以进行缩进</span>
<span class="token punctuation">[</span>myObj <span class="token keyword">short</span><span class="token punctuation">:</span>arg1
          longKeyword<span class="token punctuation">:</span>arg2
    evenLongerKeyword<span class="token punctuation">:</span>arg3
                error<span class="token punctuation">:</span>arg4<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>以下写法是错误的：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//错误，要么写在一行，要么全部分行</span>
<span class="token punctuation">[</span>myObject doFooWith<span class="token punctuation">:</span>arg1 name<span class="token punctuation">:</span>arg2
              error<span class="token punctuation">:</span>arg3<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>myObject doFooWith<span class="token punctuation">:</span>arg1
               name<span class="token punctuation">:</span>arg2 error<span class="token punctuation">:</span>arg3<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//错误，按照':'来对齐，而不是关键字</span>
<span class="token punctuation">[</span>myObject doFooWith<span class="token punctuation">:</span>arg1
          name<span class="token punctuation">:</span>arg2
          error<span class="token punctuation">:</span>arg3<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_5-public和-private标记符"><a href="#_5-public和-private标记符" class="header-anchor">#</a> 5. @public和@private标记符</h3> <p>@public和@private标记符应该以<strong>一个空格</strong>来进行缩进：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token keyword">@interface</span> MyClass <span class="token punctuation">:</span> NSObject <span class="token punctuation">{</span>
 <span class="token keyword">@public</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
 <span class="token keyword">@private</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span class="token keyword">@end</span>
</code></pre></div><h3 id="_6-协议（protocols）"><a href="#_6-协议（protocols）" class="header-anchor">#</a> 6. 协议（Protocols）</h3> <p>在书写协议的时候注意用<code>&lt;&gt;</code>括起来的协议和类型名之间是没有空格的，比如<code>IPCConnectHandler()&lt;IPCPreconnectorDelegate&gt;</code>,这个规则适用所有书写协议的地方，包括函数声明、类声明、实例变量等等：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token keyword">@interface</span> MyProtocoledClass <span class="token punctuation">:</span> NSObject<span class="token operator">&lt;</span>NSWindowDelegate<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
 <span class="token keyword">@private</span>
    id<span class="token operator">&lt;</span>MyFancyDelegate<span class="token operator">&gt;</span> _delegate<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>setDelegate<span class="token punctuation">:</span><span class="token punctuation">(</span>id<span class="token operator">&lt;</span>MyFancyDelegate<span class="token operator">&gt;</span><span class="token punctuation">)</span>aDelegate<span class="token punctuation">;</span>
<span class="token keyword">@end</span>
</code></pre></div><h3 id="_7-闭包（blocks）"><a href="#_7-闭包（blocks）" class="header-anchor">#</a> 7. 闭包（Blocks）</h3> <p>根据block的长度，有不同的书写规则：</p> <ul><li>较短的block可以写在一行内。</li> <li>如果分行显示的话，block的右括号<code>}</code>应该和调用block那行代码的第一个非空字符对齐。</li> <li>block内的代码采用<strong>4个空格</strong>的缩进。</li> <li>如果block过于庞大，应该单独声明成一个变量来使用。</li> <li><code>^</code>和<code>(</code>之间，<code>^</code>和<code>{</code>之间都没有空格，参数列表的右括号<code>)</code>和<code>{</code>之间有一个空格。</li></ul> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//较短的block写在一行内</span>
<span class="token punctuation">[</span>operation setCompletionBlock<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">self</span> onOperationDone<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//分行书写的block，内部使用4空格缩进</span>
<span class="token punctuation">[</span>operation setCompletionBlock<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>delegate newDataAvailable<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//使用C语言API调用的block遵循同样的书写规则</span>
<span class="token function">dispatch_async</span><span class="token punctuation">(</span>_fileIOQueue<span class="token punctuation">,</span> <span class="token operator">^</span><span class="token punctuation">{</span>
    NSString<span class="token operator">*</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">self</span> sessionFilePath<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//较长的block关键字可以缩进后在新行书写，注意block的右括号'}'和调用block那行代码的第一个非空字符对齐</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span>SessionService sharedService<span class="token punctuation">]</span>
    loadWindowWithCompletionBlock<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>SessionWindow <span class="token operator">*</span>window<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token punctuation">[</span><span class="token keyword">self</span> windowDidLoad<span class="token punctuation">:</span>window<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token punctuation">[</span><span class="token keyword">self</span> errorLoadingWindow<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//较长的block参数列表同样可以缩进后在新行书写</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span>SessionService sharedService<span class="token punctuation">]</span>
    loadWindowWithCompletionBlock<span class="token punctuation">:</span>
        <span class="token operator">^</span><span class="token punctuation">(</span>SessionWindow <span class="token operator">*</span>window<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token punctuation">[</span><span class="token keyword">self</span> windowDidLoad<span class="token punctuation">:</span>window<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token punctuation">[</span><span class="token keyword">self</span> errorLoadingWindow<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//庞大的block应该单独定义成变量使用</span>
<span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">^</span>largeBlock<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">^</span><span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>_operationQueue addOperationWithBlock<span class="token punctuation">:</span>largeBlock<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//在一个调用中使用多个block，注意到他们不是像函数那样通过':'对齐的，而是同时进行了4个空格的缩进</span>
<span class="token punctuation">[</span>myObject doSomethingWith<span class="token punctuation">:</span>arg1
    firstBlock<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>Foo <span class="token operator">*</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
    secondBlock<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>Bar <span class="token operator">*</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_8-数据结构的语法糖"><a href="#_8-数据结构的语法糖" class="header-anchor">#</a> 8. 数据结构的语法糖</h3> <p>应该使用可读性更好的语法糖来构造<code>NSArray</code>，<code>NSDictionary</code>等数据结构，避免使用冗长的<code>alloc</code>,<code>init</code>方法。</p> <p>如果构造代码写在一行，需要在括号两端留有一个空格，使得被构造的元素于与构造语法区分开来：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//正确，在语法糖的&quot;[]&quot;或者&quot;{}&quot;两端留有空格</span>
NSArray <span class="token operator">*</span>array <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">[</span> <span class="token punctuation">[</span>foo description<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">@&quot;Another String&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>bar description<span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
NSDictionary <span class="token operator">*</span>dict <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">{</span> NSForegroundColorAttributeName <span class="token punctuation">:</span> <span class="token punctuation">[</span>NSColor redColor<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//不正确，不留有空格降低了可读性</span>
NSArray<span class="token operator">*</span> array <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">[</span><span class="token punctuation">[</span>foo description<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>bar description<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
NSDictionary<span class="token operator">*</span> dict <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">{</span>NSForegroundColorAttributeName<span class="token punctuation">:</span> <span class="token punctuation">[</span>NSColor redColor<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>如果构造代码不写在一行内，构造元素需要使用<strong>两个空格</strong>来进行缩进，右括号<code>]</code>或者<code>}</code>写在新的一行，并且与调用语法糖那行代码的第一个非空字符对齐：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code>NSArray <span class="token operator">*</span>array <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">[</span>
  <span class="token string">@&quot;This&quot;</span><span class="token punctuation">,</span>
  <span class="token string">@&quot;is&quot;</span><span class="token punctuation">,</span>
  <span class="token string">@&quot;an&quot;</span><span class="token punctuation">,</span>
  <span class="token string">@&quot;array&quot;</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

NSDictionary <span class="token operator">*</span>dictionary <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">{</span>
  NSFontAttributeName <span class="token punctuation">:</span> <span class="token punctuation">[</span>NSFont fontWithName<span class="token punctuation">:</span><span class="token string">@&quot;Helvetica-Bold&quot;</span> size<span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  NSForegroundColorAttributeName <span class="token punctuation">:</span> fontColor
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>构造字典时，字典的Key和Value与中间的冒号<code>:</code>都要留有一个空格，多行书写时，也可以将Value对齐：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//正确，冒号':'前后留有一个空格</span>
NSDictionary <span class="token operator">*</span>option1 <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">{</span>
  NSFontAttributeName <span class="token punctuation">:</span> <span class="token punctuation">[</span>NSFont fontWithName<span class="token punctuation">:</span><span class="token string">@&quot;Helvetica-Bold&quot;</span> size<span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  NSForegroundColorAttributeName <span class="token punctuation">:</span> fontColor
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//正确，按照Value来对齐</span>
NSDictionary <span class="token operator">*</span>option2 <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">{</span>
  NSFontAttributeName <span class="token punctuation">:</span>            <span class="token punctuation">[</span>NSFont fontWithName<span class="token punctuation">:</span><span class="token string">@&quot;Arial&quot;</span> size<span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  NSForegroundColorAttributeName <span class="token punctuation">:</span> fontColor
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//错误，冒号前应该有一个空格</span>
NSDictionary <span class="token operator">*</span>wrong <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">{</span>
  AKey<span class="token punctuation">:</span>       <span class="token string">@&quot;b&quot;</span><span class="token punctuation">,</span>
  BLongerKey<span class="token punctuation">:</span> <span class="token string">@&quot;c&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//错误，每一个元素要么单独成为一行，要么全部写在一行内</span>
NSDictionary <span class="token operator">*</span>alsoWrong<span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">{</span> AKey <span class="token punctuation">:</span> <span class="token string">@&quot;a&quot;</span><span class="token punctuation">,</span>
                            BLongerKey <span class="token punctuation">:</span> <span class="token string">@&quot;b&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//错误，在冒号前只能有一个空格，冒号后才可以考虑按照Value对齐</span>
NSDictionary <span class="token operator">*</span>stillWrong <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">{</span>
  AKey       <span class="token punctuation">:</span> <span class="token string">@&quot;b&quot;</span><span class="token punctuation">,</span>
  BLongerKey <span class="token punctuation">:</span> <span class="token string">@&quot;c&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><br> <h2 id="二-命名规范"><a href="#二-命名规范" class="header-anchor">#</a> 二. 命名规范</h2> <h3 id="_1-基本原则"><a href="#_1-基本原则" class="header-anchor">#</a> 1. 基本原则</h3> <h4 id="清晰"><a href="#清晰" class="header-anchor">#</a> 清晰</h4> <p>命名应该尽可能的清晰和简洁，但在Objective-C中，清晰比简洁更重要。由于Xcode强大的自动补全功能，我们不必担心名称过长的问题。</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//清晰</span>
insertObject<span class="token punctuation">:</span>atIndex<span class="token punctuation">:</span>

<span class="token comment">//不清晰，insert的对象类型和at的位置属性没有说明</span>
insert<span class="token punctuation">:</span>at<span class="token punctuation">:</span>

<span class="token comment">//清晰</span>
removeObjectAtIndex<span class="token punctuation">:</span>

<span class="token comment">//不清晰，remove的对象类型没有说明，参数的作用没有说明</span>
remove<span class="token punctuation">:</span>
</code></pre></div><p>不要使用单词的简写，拼写出完整的单词：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//清晰</span>
destinationSelection
setBackgroundColor<span class="token punctuation">:</span>

<span class="token comment">//不清晰，不要使用简写</span>
destSel
setBkgdColor<span class="token punctuation">:</span>
</code></pre></div><p>然而，有部分单词简写在Objective-C编码过程中是非常常用的，以至于成为了一种规范，这些简写可以在代码中直接使用，下面列举了部分：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code>alloc   <span class="token operator">==</span> Allocate					max    <span class="token operator">==</span> Maximum
alt     <span class="token operator">==</span> Alternate				min    <span class="token operator">==</span> Minimum
app     <span class="token operator">==</span> Application				msg    <span class="token operator">==</span> Message
calc    <span class="token operator">==</span> Calculate				nib    <span class="token operator">==</span> Interface Builder archive
dealloc <span class="token operator">==</span> Deallocate				pboard <span class="token operator">==</span> Pasteboard
func    <span class="token operator">==</span> Function					rect   <span class="token operator">==</span> Rectangle
horiz   <span class="token operator">==</span> Horizontal				Rep    <span class="token operator">==</span> <span class="token function">Representation</span> <span class="token punctuation">(</span>used <span class="token keyword">in</span> class name such as NSBitmapImageRep<span class="token punctuation">)</span><span class="token punctuation">.</span>
info    <span class="token operator">==</span> Information				temp   <span class="token operator">==</span> Temporary
init    <span class="token operator">==</span> Initialize				vert   <span class="token operator">==</span> Vertical
<span class="token keyword">int</span>     <span class="token operator">==</span> Integer
</code></pre></div><p>命名方法或者函数时要避免歧义</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//有歧义，是返回sendPort还是send一个Port？</span>
sendPort

<span class="token comment">//有歧义，是返回一个名字属性的值还是display一个name的动作？</span>
displayName
</code></pre></div><h4 id="一致性"><a href="#一致性" class="header-anchor">#</a> 一致性</h4> <p>整个工程的命名风格要保持一致性，最好和苹果SDK的代码保持统一。不同类中完成相似功能的方法应该叫一样的名字，比如我们总是用<code>count</code>来返回集合的个数，不能在A类中使用<code>count</code>而在B类中使用<code>getNumber</code>。</p> <h3 id="_2-使用前缀"><a href="#_2-使用前缀" class="header-anchor">#</a> 2. 使用前缀</h3> <p>如果代码需要打包成Framework给别的工程使用，或者工程项目非常庞大，需要拆分成不同的模块，使用命名前缀是非常有用的。</p> <ul><li><p>前缀由大写的字母缩写组成，比如Cocoa中<code>NS</code>前缀代表Founation框架中的类，<code>IB</code>则代表Interface Builder框架。</p></li> <li><p>可以在为类、协议、函数、常量以及typedef宏命名的时候使用前缀，但注意<strong>不要</strong>为成员变量或者方法使用前缀，因为他们本身就包含在类的命名空间内。</p></li> <li><p>命名前缀的时候不要和苹果SDK框架冲突。</p></li></ul> <h3 id="_3-命名类和协议（class-protocol）"><a href="#_3-命名类和协议（class-protocol）" class="header-anchor">#</a> 3. 命名类和协议（Class&amp;Protocol）</h3> <p>类名以大写字母开头，应该包含一个<em>名词</em>来表示它代表的对象类型，同时可以加上必要的前缀，比如<code>NSString</code>, <code>NSDate</code>, <code>NSScanner</code>, <code>NSApplication</code>等等。</p> <p>而协议名称应该清晰地表示它所执行的行为，而且要和类名区别开来，所以通常使用<code>ing</code>词尾来命名一个协议，比如<code>NSCopying</code>,<code>NSLocking</code>。</p> <p>有些协议本身包含了很多不相关的功能，主要用来为某一特定类服务，这时候可以直接用类名来命名这个协议，比如<code>NSObject</code>协议，它包含了id对象在生存周期内的一系列方法。</p> <h3 id="_4-命名头文件（headers）"><a href="#_4-命名头文件（headers）" class="header-anchor">#</a> 4. 命名头文件（Headers）</h3> <p>源码的头文件名应该清晰地暗示它的功能和包含的内容：</p> <ul><li><p>如果头文件内只定义了单个类或者协议，直接用类名或者协议名来命名头文件，比如<code>NSLocale.h</code>定义了<code>NSLocale</code>类。</p></li> <li><p>如果头文件内定义了一系列的类、协议、类别，使用其中最主要的类名来命名头文件，比如<code>NSString.h</code>定义了<code>NSString</code>和<code>NSMutableString</code>。</p></li> <li><p>每一个Framework都应该有一个和框架同名的头文件，包含了框架中所有公共类头文件的引用，比如<code>Foundation.h</code></p></li> <li><p>Framework中有时候会实现在别的框架中类的类别扩展，这样的文件通常使用<code>被扩展的框架名</code>+<code>Additions</code>的方式来命名，比如<code>NSBundleAdditions.h</code>。</p></li></ul> <h3 id="_5-命名方法（methods）"><a href="#_5-命名方法（methods）" class="header-anchor">#</a> 5. 命名方法（Methods）</h3> <p>Objective-C的方法名通常都比较长，这是为了让程序有更好地可读性，按苹果的说法*“好的方法名应当可以以一个句子的形式朗读出来”*。</p> <p>方法一般以小写字母打头，每一个后续的单词首字母大写，方法名中不应该有标点符号（<em>包括下划线</em>），有两个例外：</p> <ul><li>可以用一些通用的大写字母缩写打头方法，比如<code>PDF</code>,<code>TIFF</code>等。</li> <li>可以用带下划线的前缀来命名私有方法或者类别中的方法。</li></ul> <p>如果方法表示让对象执行一个动作，使用动词打头来命名，注意不要使用<code>do</code>，<code>does</code>这种多余的关键字，动词本身的暗示就足够了：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//动词打头的方法表示让对象执行一个动作</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>invokeWithTarget<span class="token punctuation">:</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>target<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>selectTabViewItem<span class="token punctuation">:</span><span class="token punctuation">(</span>NSTabViewItem <span class="token operator">*</span><span class="token punctuation">)</span>tabViewItem<span class="token punctuation">;</span>
</code></pre></div><p>如果方法是为了获取对象的一个属性值，直接用属性名称来命名这个方法，注意不要添加<code>get</code>或者其他的动词前缀：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//正确，使用属性名来命名方法</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>NSSize<span class="token punctuation">)</span>cellSize<span class="token punctuation">;</span>

<span class="token comment">//错误，添加了多余的动词前缀</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>NSSize<span class="token punctuation">)</span>calcCellSize<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>NSSize<span class="token punctuation">)</span>getCellSize<span class="token punctuation">;</span>
</code></pre></div><p>对于有多个参数的方法，务必在每一个参数前都添加关键词，关键词应当清晰说明参数的作用：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//正确，保证每个参数都有关键词修饰</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>sendAction<span class="token punctuation">:</span><span class="token punctuation">(</span>SEL<span class="token punctuation">)</span>aSelector toObject<span class="token punctuation">:</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>anObject forAllCells<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>flag<span class="token punctuation">;</span>

<span class="token comment">//错误，遗漏关键词</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>sendAction<span class="token punctuation">:</span><span class="token punctuation">(</span>SEL<span class="token punctuation">)</span>aSelector <span class="token punctuation">:</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>anObject <span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>flag<span class="token punctuation">;</span>

<span class="token comment">//正确</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>viewWithTag<span class="token punctuation">:</span><span class="token punctuation">(</span>NSInteger<span class="token punctuation">)</span>aTag<span class="token punctuation">;</span>

<span class="token comment">//错误，关键词的作用不清晰</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>taggedView<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>aTag<span class="token punctuation">;</span>
</code></pre></div><p>不要用<code>and</code>来连接两个参数，通常<code>and</code>用来表示方法执行了两个相对独立的操作（<em>从设计上来说，这时候应该拆分成两个独立的方法</em>）：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//错误，不要使用&quot;and&quot;来连接参数</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>runModalForDirectory<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>path andFile<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>name andTypes<span class="token punctuation">:</span><span class="token punctuation">(</span>NSArray <span class="token operator">*</span><span class="token punctuation">)</span>fileTypes<span class="token punctuation">;</span>

<span class="token comment">//正确，使用&quot;and&quot;来表示两个相对独立的操作</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>openFile<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>fullPath withApplication<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>appName andDeactivate<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>flag<span class="token punctuation">;</span>
</code></pre></div><p>方法的参数命名也有一些需要注意的地方:</p> <ul><li>和方法名类似，参数的第一个字母小写，后面的每一个单词首字母大写</li> <li>不要再方法名中使用类似<code>pointer</code>,<code>ptr</code>这样的字眼去表示指针，参数本身的类型足以说明</li> <li>不要使用只有一两个字母的参数名</li> <li>不要使用简写，拼出完整的单词</li></ul> <p>下面列举了一些常用参数名：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>action<span class="token punctuation">:</span><span class="token punctuation">(</span>SEL<span class="token punctuation">)</span>aSelector
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>alignment<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>mode
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>atIndex<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>index
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>content<span class="token punctuation">:</span><span class="token punctuation">(</span>NSRect<span class="token punctuation">)</span>aRect
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>doubleValue<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>aDouble
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>floatValue<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>aFloat
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>font<span class="token punctuation">:</span><span class="token punctuation">(</span>NSFont <span class="token operator">*</span><span class="token punctuation">)</span>fontObj
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>frame<span class="token punctuation">:</span><span class="token punctuation">(</span>NSRect<span class="token punctuation">)</span>frameRect
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>intValue<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>anInt
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>keyEquivalent<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>charCode
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>length<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>numBytes
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>point<span class="token punctuation">:</span><span class="token punctuation">(</span>NSPoint<span class="token punctuation">)</span>aPoint
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>stringValue<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>aString
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>tag<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>anInt
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>target<span class="token punctuation">:</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>anObject
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>title<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>aString
</code></pre></div><h3 id="_6-存取方法（accessor-methods）"><a href="#_6-存取方法（accessor-methods）" class="header-anchor">#</a> 6. 存取方法（Accessor Methods）</h3> <p>存取方法是指用来获取和设置类属性值的方法，属性的不同类型，对应着不同的存取方法规范：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//属性是一个名词时的存取方法范式</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span>noun<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>setNoun<span class="token punctuation">:</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>aNoun<span class="token punctuation">;</span>
<span class="token comment">//栗子</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>title<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>setTitle<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>aTitle<span class="token punctuation">;</span>

<span class="token comment">//属性是一个形容词时存取方法的范式</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>isAdjective<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>setAdjective<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>flag<span class="token punctuation">;</span>
<span class="token comment">//栗子</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>isEditable<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>setEditable<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>flag<span class="token punctuation">;</span>

<span class="token comment">//属性是一个动词时存取方法的范式</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>verbObject<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>setVerbObject<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>flag<span class="token punctuation">;</span>
<span class="token comment">//栗子</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>showsAlpha<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>setShowsAlpha<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>flag<span class="token punctuation">;</span>
</code></pre></div><p>命名存取方法时不要将动词转化为被动形式来使用：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//正确</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>setAcceptsGlyphInfo<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>flag<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>acceptsGlyphInfo<span class="token punctuation">;</span>

<span class="token comment">//错误，不要使用动词的被动形式</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>setGlyphInfoAccepted<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>flag<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>glyphInfoAccepted<span class="token punctuation">;</span>
</code></pre></div><p>可以使用<code>can</code>,<code>should</code>,<code>will</code>等词来协助表达存取方法的意思，但不要使用<code>do</code>,和<code>does</code>：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//正确</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>setCanHide<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>flag<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>canHide<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>setShouldCloseDocument<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>flag<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>shouldCloseDocument<span class="token punctuation">;</span>

<span class="token comment">//错误，不要使用&quot;do&quot;或者&quot;does&quot;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>setDoesAcceptGlyphInfo<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>flag<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>doesAcceptGlyphInfo<span class="token punctuation">;</span>
</code></pre></div><p>为什么Objective-C中不适用<code>get</code>前缀来表示属性获取方法？因为<code>get</code>在Objective-C中通常只用来表示从函数指针返回值的函数：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//三个参数都是作为函数的返回值来使用的，这样的函数名可以使用&quot;get&quot;前缀</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>getLineDash<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span>pattern count<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span>count phase<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span><span class="token punctuation">)</span>phase<span class="token punctuation">;</span>
</code></pre></div><h3 id="_7-命名委托（delegate）"><a href="#_7-命名委托（delegate）" class="header-anchor">#</a> 7. 命名委托（Delegate）</h3> <p>当特定的事件发生时，对象会触发它注册的委托方法。委托是Objective-C中常用的传递消息的方式。委托有它固定的命名范式。</p> <p>一个委托方法的第一个参数是触发它的对象，第一个关键词是触发对象的类名，除非委托方法只有一个名为<code>sender</code>的参数：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//第一个关键词为触发委托的类名</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>tableView<span class="token punctuation">:</span><span class="token punctuation">(</span>NSTableView <span class="token operator">*</span><span class="token punctuation">)</span>tableView shouldSelectRow<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>row<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span>NSApplication <span class="token operator">*</span><span class="token punctuation">)</span>sender openFile<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>filename<span class="token punctuation">;</span>

<span class="token comment">//当只有一个&quot;sender&quot;参数时可以省略类名</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>applicationOpenUntitledFile<span class="token punctuation">:</span><span class="token punctuation">(</span>NSApplication <span class="token operator">*</span><span class="token punctuation">)</span>sender<span class="token punctuation">;</span>
</code></pre></div><p>根据委托方法触发的时机和目的，使用<code>should</code>,<code>will</code>,<code>did</code>等关键词</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>browserDidScroll<span class="token punctuation">:</span><span class="token punctuation">(</span>NSBrowser <span class="token operator">*</span><span class="token punctuation">)</span>sender<span class="token punctuation">;</span>

<span class="token operator">-</span> <span class="token punctuation">(</span>NSUndoManager <span class="token operator">*</span><span class="token punctuation">)</span>windowWillReturnUndoManager<span class="token punctuation">:</span><span class="token punctuation">(</span>NSWindow <span class="token operator">*</span><span class="token punctuation">)</span>window<span class="token punctuation">;</span>、

<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>windowShouldClose<span class="token punctuation">:</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>sender<span class="token punctuation">;</span>
</code></pre></div><h3 id="_8-集合操作类方法（collection-methods）"><a href="#_8-集合操作类方法（collection-methods）" class="header-anchor">#</a> 8. 集合操作类方法（Collection Methods）</h3> <p>有些对象管理着一系列其它对象或者元素的集合，需要使用类似“增删查改”的方法来对集合进行操作，这些方法的命名范式一般为：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//集合操作范式</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>addElement<span class="token punctuation">:</span><span class="token punctuation">(</span>elementType<span class="token punctuation">)</span>anObj<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>removeElement<span class="token punctuation">:</span><span class="token punctuation">(</span>elementType<span class="token punctuation">)</span>anObj<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>NSArray <span class="token operator">*</span><span class="token punctuation">)</span>elements<span class="token punctuation">;</span>

<span class="token comment">//栗子</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>addLayoutManager<span class="token punctuation">:</span><span class="token punctuation">(</span>NSLayoutManager <span class="token operator">*</span><span class="token punctuation">)</span>obj<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>removeLayoutManager<span class="token punctuation">:</span><span class="token punctuation">(</span>NSLayoutManager <span class="token operator">*</span><span class="token punctuation">)</span>obj<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>NSArray <span class="token operator">*</span><span class="token punctuation">)</span>layoutManagers<span class="token punctuation">;</span>
</code></pre></div><p>注意，如果返回的集合是无序的，使用<code>NSSet</code>来代替<code>NSArray</code>。如果需要将元素插入到特定的位置，使用类似于这样的命名：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>insertLayoutManager<span class="token punctuation">:</span><span class="token punctuation">(</span>NSLayoutManager <span class="token operator">*</span><span class="token punctuation">)</span>obj atIndex<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>index<span class="token punctuation">;</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>removeLayoutManagerAtIndex<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>index<span class="token punctuation">;</span>
</code></pre></div><p>如果管理的集合元素中有指向管理对象的指针，要设置成<code>weak</code>类型以防止引用循环。</p> <p>下面是SDK中<code>NSWindow</code>类的集合操作方法：</p> <div class="language-objective-c extra-class"><pre class="language-text"><code>- (void)addChildWindow:(NSWindow *)childWin ordered:(NSWindowOrderingMode)place;
- (void)removeChildWindow:(NSWindow *)childWin;
- (NSArray *)childWindows;
- (NSWindow *)parentWindow;
- (void)setParentWindow:(NSWindow *)window;
</code></pre></div><h3 id="_9-命名函数（functions）"><a href="#_9-命名函数（functions）" class="header-anchor">#</a> 9. 命名函数（Functions）</h3> <p>在很多场合仍然需要用到函数，比如说如果一个对象是一个单例，那么应该使用函数来代替类方法执行相关操作。</p> <p>函数的命名和方法有一些不同，主要是：</p> <ul><li>函数名称一般带有缩写前缀，表示方法所在的框架。</li> <li>前缀后的单词以“驼峰”表示法显示，第一个单词首字母大写。</li></ul> <p>函数名的第一个单词通常是一个动词，表示方法执行的操作：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code>NSHighlightRect
NSDeallocateObject
</code></pre></div><p>如果函数返回其参数的某个属性，省略动词：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token keyword">unsigned</span> <span class="token keyword">int</span> <span class="token function">NSEventMaskFromType</span><span class="token punctuation">(</span>NSEventType type<span class="token punctuation">)</span>
<span class="token keyword">float</span> <span class="token function">NSHeight</span><span class="token punctuation">(</span>NSRect aRect<span class="token punctuation">)</span>
</code></pre></div><p>如果函数通过指针参数来返回值，需要在函数名中使用<code>Get</code>：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">NSGetSizeAndAlignment</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>typePtr<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> <span class="token operator">*</span>sizep<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> <span class="token operator">*</span>alignp<span class="token punctuation">)</span>
</code></pre></div><p>函数的返回类型是BOOL时的命名：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code>BOOL <span class="token function">NSDecimalIsNotANumber</span><span class="token punctuation">(</span><span class="token keyword">const</span> NSDecimal <span class="token operator">*</span>decimal<span class="token punctuation">)</span>
</code></pre></div><h3 id="_10-命名属性和实例变量（properties-instance-variables）"><a href="#_10-命名属性和实例变量（properties-instance-variables）" class="header-anchor">#</a> 10. 命名属性和实例变量（Properties&amp;Instance Variables）</h3> <p>属性和对象的存取方法相关联，属性的第一个字母小写，后续单词首字母大写，不必添加前缀。属性按功能命名成名词或者动词：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//名词属性</span>
<span class="token keyword">@property</span> <span class="token punctuation">(</span>strong<span class="token punctuation">)</span> NSString <span class="token operator">*</span>title<span class="token punctuation">;</span>

<span class="token comment">//动词属性</span>
<span class="token keyword">@property</span> <span class="token punctuation">(</span>assign<span class="token punctuation">)</span> BOOL showsAlpha<span class="token punctuation">;</span>
</code></pre></div><p>属性也可以命名成形容词，这时候通常会指定一个带有<code>is</code>前缀的get方法来提高可读性：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token keyword">@property</span> <span class="token punctuation">(</span>assign<span class="token punctuation">,</span> getter<span class="token operator">=</span>isEditable<span class="token punctuation">)</span> BOOL editable<span class="token punctuation">;</span>
</code></pre></div><p>命名实例变量，在变量名前加上<code>_</code>前缀（<em>有些有历史的代码会将<code>_</code>放在后面</em>），其它和命名属性一样：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token keyword">@implementation</span> MyClass <span class="token punctuation">{</span>
    BOOL _showsTitle<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>一般来说，类需要对使用者隐藏数据存储的细节，所以不要将实例方法定义成公共可访问的接口，可以使用<code>@private</code>，<code>@protected</code>前缀。</p> <p><em>按苹果的说法，不建议在除了<code>init</code>和<code>dealloc</code>方法以外的地方直接访问实例变量，但很多人认为直接访问会让代码更加清晰可读，只在需要计算或者执行操作的时候才使用存取方法访问，我就是这种习惯，所以这里不作要求。</em></p> <h3 id="_11-命名常量（constants）"><a href="#_11-命名常量（constants）" class="header-anchor">#</a> 11. 命名常量（Constants）</h3> <p>如果要定义一组相关的常量，尽量使用枚举类型（enumerations），枚举类型的命名规则和函数的命名规则相同。
建议使用 <code>NS_ENUM</code> 和 <code>NS_OPTIONS</code> 宏来定义枚举类型，参见官方的 <a href="https://developer.apple.com/library/ios/releasenotes/ObjectiveC/ModernizationObjC/AdoptingModernObjective-C/AdoptingModernObjective-C.html" target="_blank" rel="noopener noreferrer">Adopting Modern Objective-C<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 一文：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//定义一个枚举</span>
<span class="token keyword">typedef</span> <span class="token function">NS_ENUM</span><span class="token punctuation">(</span>NSInteger<span class="token punctuation">,</span> NSMatrixMode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    NSRadioModeMatrix<span class="token punctuation">,</span>
    NSHighlightModeMatrix<span class="token punctuation">,</span>
    NSListModeMatrix<span class="token punctuation">,</span>
    NSTrackModeMatrix
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>定义bit map：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token keyword">typedef</span> <span class="token function">NS_OPTIONS</span><span class="token punctuation">(</span>NSUInteger<span class="token punctuation">,</span> NSWindowMask<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    NSBorderlessWindowMask      <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    NSTitledWindowMask          <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">0</span><span class="token punctuation">,</span>
    NSClosableWindowMask        <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span>
    NSMiniaturizableWindowMask  <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">,</span>
    NSResizableWindowMask       <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">3</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>使用<code>const</code>定义浮点型或者单个的整数型常量，如果要定义一组相关的整数常量，应该优先使用枚举。常量的命名规范和函数相同：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token keyword">const</span> <span class="token keyword">float</span> NSLightGray<span class="token punctuation">;</span>
</code></pre></div><p>不要使用<code>#define</code>宏来定义常量，如果是整型常量，尽量使用枚举，浮点型常量，使用<code>const</code>定义。<code>#define</code>通常用来给编译器决定是否编译某块代码，比如常用的：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">DEBUG</span></span>
</code></pre></div><p>注意到一般由编译器定义的宏会在前后都有一个<code>__</code>，比如*<code>__MACH__</code>*。</p> <h3 id="_12-命名通知（notifications）"><a href="#_12-命名通知（notifications）" class="header-anchor">#</a> 12. 命名通知（Notifications）</h3> <p>通知常用于在模块间传递消息，所以通知要尽可能地表示出发生的事件，通知的命名范式是：</p> <div class="language- extra-class"><pre><code>[触发通知的类名] + [Did | Will] + [动作] + Notification
</code></pre></div><p>栗子：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code>NSApplicationDidBecomeActiveNotification
NSWindowDidMiniaturizeNotification
NSTextViewDidChangeSelectionNotification
NSColorPanelColorDidChangeNotification
</code></pre></div><br> <h2 id="三-注释"><a href="#三-注释" class="header-anchor">#</a> 三. 注释</h2> <p>读没有注释代码的痛苦你我都体会过，好的注释不仅能让人轻松读懂你的程序，还能提升代码的逼格。注意注释是为了让别人看懂，而不是仅仅你自己。</p> <h3 id="_1-文件注释"><a href="#_1-文件注释" class="header-anchor">#</a> 1. 文件注释</h3> <p>每一个文件都<strong>必须</strong>写文件注释，文件注释通常包含</p> <ul><li>文件所在模块</li> <li>作者信息</li> <li>历史版本信息</li> <li>版权信息</li> <li>文件包含的内容，作用</li></ul> <p>一段良好文件注释的栗子：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">/*******************************************************************************
	Copyright (C), 2011-2013, Andrew Min Chang

	File name: 	AMCCommonLib.h
	Author:		Andrew Chang (Zhang Min)
	E-mail:		LaplaceZhang@126.com

	Description: 	
			This file provide some covenient tool in calling library tools. One can easily include
		library headers he wants by declaring the corresponding macros.
			I hope this file is not only a header, but also a useful Linux library note.

	History:
		2012-??-??: On about come date around middle of Year 2012, file created as &quot;commonLib.h&quot;
		2012-08-20: Add shared memory library; add message queue.
		2012-08-21: Add socket library (local)
		2012-08-22: Add math library
		2012-08-23: Add socket library (internet)
		2012-08-24: Add daemon function
		2012-10-10: Change file name as &quot;AMCCommonLib.h&quot;
		2012-12-04: Add UDP support in AMC socket library
		2013-01-07: Add basic data type such as &quot;sint8_t&quot;
		2013-01-18: Add CFG_LIB_STR_NUM.
		2013-01-22: Add CFG_LIB_TIMER.
		2013-01-22: Remove CFG_LIB_DATA_TYPE because there is already AMCDataTypes.h

	Copyright information:
			This file was intended to be under GPL protocol. However, I may use this library
		in my work as I am an employee. And my company may require me to keep it secret.
		Therefore, this file is neither open source nor under GPL control.

********************************************************************************/</span>
</code></pre></div><p><em>文件注释的格式通常不作要求，能清晰易读就可以了，但在整个工程中风格要统一。</em></p> <h3 id="_2-代码注释"><a href="#_2-代码注释" class="header-anchor">#</a> 2. 代码注释</h3> <p>好的代码应该是“自解释”（self-documenting）的，但仍然需要详细的注释来说明参数的意义、返回值、功能以及可能的副作用。</p> <p>方法、函数、类、协议、类别的定义都需要注释，推荐采用Apple的标准注释风格，好处是可以在引用的地方<code>alt+点击</code>自动弹出注释，非常方便。</p> <p>有很多可以自动生成注释格式的插件，推荐使用<a href="https://github.com/onevcat/VVDocumenter-Xcode" target="_blank" rel="noopener noreferrer">VVDocumenter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：</p> <p>一些良好的注释：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">/**
 *  Create a new preconnector to replace the old one with given mac address.
 *  NOTICE: We DO NOT stop the old preconnector, so handle it by yourself.
 *
 *  @param type       Connect type the preconnector use.
 *  @param macAddress Preconnector's mac address.
 */</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>refreshConnectorWithConnectType<span class="token punctuation">:</span><span class="token punctuation">(</span>IPCConnectType<span class="token punctuation">)</span>type  Mac<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>macAddress<span class="token punctuation">;</span>

<span class="token comment">/**
 *  Stop current preconnecting when application is going to background.
 */</span>
<span class="token operator">-</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>stopRunning<span class="token punctuation">;</span>

<span class="token comment">/**
 *  Get the COPY of cloud device with a given mac address.
 *
 *  @param macAddress Mac address of the device.
 *
 *  @return Instance of IPCCloudDevice.
 */</span>
<span class="token operator">-</span><span class="token punctuation">(</span>IPCCloudDevice <span class="token operator">*</span><span class="token punctuation">)</span>getCloudDeviceWithMac<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>macAddress<span class="token punctuation">;</span>

<span class="token comment">// A delegate for NSApplication to handle notifications about app</span>
<span class="token comment">// launch and shutdown. Owned by the main app controller.</span>
<span class="token keyword">@interface</span> MyAppDelegate <span class="token punctuation">:</span> NSObject <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span class="token keyword">@end</span>
</code></pre></div><p>协议、委托的注释要明确说明其被触发的条件：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">/** Delegate - Sent when failed to init connection, like p2p failed. */</span>
<span class="token operator">-</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>initConnectionDidFailed<span class="token punctuation">:</span><span class="token punctuation">(</span>IPCConnectHandler <span class="token operator">*</span><span class="token punctuation">)</span>handler<span class="token punctuation">;</span>
</code></pre></div><p>如果在注释中要引用参数名或者方法函数名，使用<code>||</code>将参数或者方法括起来以避免歧义：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">// Sometimes we need |count| to be less than zero.</span>

<span class="token comment">// Remember to call |StringWithoutSpaces(&quot;foo bar baz&quot;)|</span>
</code></pre></div><p><strong>定义在头文件里的接口方法、属性必须要有注释！</strong></p> <br> <h2 id="四-编码风格"><a href="#四-编码风格" class="header-anchor">#</a> 四. 编码风格</h2> <p>每个人都有自己的编码风格，这里总结了一些比较好的Cocoa编程风格和注意点。</p> <h3 id="_1-不要使用new方法"><a href="#_1-不要使用new方法" class="header-anchor">#</a> 1. 不要使用new方法</h3> <p>尽管很多时候能用<code>new</code>代替<code>alloc init</code>方法，但这可能会导致调试内存时出现不可预料的问题。Cocoa的规范就是使用<code>alloc init</code>方法，使用<code>new</code>会让一些读者困惑。</p> <h3 id="_2-public-api要尽量简洁"><a href="#_2-public-api要尽量简洁" class="header-anchor">#</a> 2. Public API要尽量简洁</h3> <p>共有接口要设计的简洁，满足核心的功能需求就可以了。不要设计很少会被用到，但是参数极其复杂的API。如果要定义复杂的方法，使用类别或者类扩展。</p> <h3 id="_3-import和-include"><a href="#_3-import和-include" class="header-anchor">#</a> 3. #import和#include</h3> <p><code>#import</code>是Cocoa中常用的引用头文件的方式，它能自动防止重复引用文件，什么时候使用<code>#import</code>，什么时候使用<code>#include</code>呢？</p> <ul><li>当引用的是一个Objective-C或者Objective-C++的头文件时，使用<code>#import</code></li> <li>当引用的是一个C或者C++的头文件时，使用<code>#include</code>，这时必须要保证被引用的文件提供了保护域（#define guard）。</li></ul> <p>栗子：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>Cocoa<span class="token operator">/</span>Cocoa<span class="token punctuation">.</span>h<span class="token operator">&gt;</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;CoreFoundation/CoreFoundation.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token string">&quot;GTMFoo.h&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;base/basictypes.h&quot;</span></span>
</code></pre></div><p>为什么不全部使用<code>#import</code>呢？主要是为了保证代码在不同平台间共享时不出现问题。</p> <h3 id="_4-引用框架的根头文件"><a href="#_4-引用框架的根头文件" class="header-anchor">#</a> 4. 引用框架的根头文件</h3> <p>上面提到过，每一个框架都会有一个和框架同名的头文件，它包含了框架内接口的所有引用，在使用框架的时候，应该直接引用这个根头文件，而不是其它子模块的头文件，即使是你只用到了其中的一小部分，编译器会自动完成优化的。</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//正确，引用根头文件</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>Foundation<span class="token operator">/</span>Foundation<span class="token punctuation">.</span>h<span class="token operator">&gt;</span></span></span>

<span class="token comment">//错误，不要单独引用框架内的其它头文件</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>Foundation<span class="token operator">/</span>NSArray<span class="token punctuation">.</span>h<span class="token operator">&gt;</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>Foundation<span class="token operator">/</span>NSString<span class="token punctuation">.</span>h<span class="token operator">&gt;</span></span></span>
</code></pre></div><h3 id="_5-bool的使用"><a href="#_5-bool的使用" class="header-anchor">#</a> 5. BOOL的使用</h3> <p>BOOL在Objective-C中被定义为<code>signed char</code>类型，这意味着一个BOOL类型的变量不仅仅可以表示<code>YES</code>(1)和<code>NO</code>(0)两个值，所以永远<strong>不要</strong>将BOOL类型变量直接和<code>YES</code>比较：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//错误，无法确定|great|的值是否是YES(1)，不要将BOOL值直接与YES比较</span>
BOOL great <span class="token operator">=</span> <span class="token punctuation">[</span>foo isGreat<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>great <span class="token operator">==</span> YES<span class="token punctuation">)</span>
  <span class="token comment">// ...be great!</span>

<span class="token comment">//正确</span>
BOOL great <span class="token operator">=</span> <span class="token punctuation">[</span>foo isGreat<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>great<span class="token punctuation">)</span>
  <span class="token comment">// ...be great!</span>
</code></pre></div><p>同样的，也不要将其它类型的值作为BOOL来返回，这种情况下，BOOL变量只会取值的最后一个字节来赋值，这样很可能会取到0（NO）。但是，一些逻辑操作符比如<code>&amp;&amp;</code>,<code>||</code>,<code>!</code>的返回是可以直接赋给BOOL的：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//错误，不要将其它类型转化为BOOL返回</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>isBold <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token keyword">self</span> fontTraits<span class="token punctuation">]</span> <span class="token operator">&amp;</span> NSFontBoldTrait<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>isValid <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token keyword">self</span> stringValue<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//正确</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>isBold <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">self</span> fontTraits<span class="token punctuation">]</span> <span class="token operator">&amp;</span> NSFontBoldTrait<span class="token punctuation">)</span> <span class="token operator">?</span> YES <span class="token punctuation">:</span> NO<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//正确，逻辑操作符可以直接转化为BOOL</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>isValid <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token keyword">self</span> stringValue<span class="token punctuation">]</span> <span class="token operator">!=</span> nil<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>isEnabled <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token keyword">self</span> isValid<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span><span class="token keyword">self</span> isBold<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>另外BOOL类型可以和<code>_Bool</code>,<code>bool</code>相互转化，但是<strong>不能</strong>和<code>Boolean</code>转化。</p> <h3 id="_6-使用arc"><a href="#_6-使用arc" class="header-anchor">#</a> 6. 使用ARC</h3> <p>除非想要兼容一些古董级的机器和操作系统，我们没有理由放弃使用ARC。在最新版的Xcode(6.2)中，ARC是自动打开的，所以直接使用就好了。</p> <h3 id="_7-在init和dealloc中不要用存取方法访问实例变量"><a href="#_7-在init和dealloc中不要用存取方法访问实例变量" class="header-anchor">#</a> 7. 在init和dealloc中不要用存取方法访问实例变量</h3> <p>当<code>init``dealloc</code>方法被执行时，类的运行时环境不是处于正常状态的，使用存取方法访问变量可能会导致不可预料的结果，因此应当在这两个方法内直接访问实例变量。</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//正确，直接访问实例变量</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>instancetype<span class="token punctuation">)</span>init <span class="token punctuation">{</span>
  <span class="token keyword">self</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">super</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _bar <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>NSMutableString alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">self</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>dealloc <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>_bar release<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">[</span><span class="token keyword">super</span> dealloc<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//错误，不要通过存取方法访问</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>instancetype<span class="token punctuation">)</span>init <span class="token punctuation">{</span>
  <span class="token keyword">self</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">super</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>bar <span class="token operator">=</span> <span class="token punctuation">[</span>NSMutableString string<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">self</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>dealloc <span class="token punctuation">{</span>
  <span class="token keyword">self</span><span class="token punctuation">.</span>bar <span class="token operator">=</span> nil<span class="token punctuation">;</span>
  <span class="token punctuation">[</span><span class="token keyword">super</span> dealloc<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_8-按照定义的顺序释放资源"><a href="#_8-按照定义的顺序释放资源" class="header-anchor">#</a> 8. 按照定义的顺序释放资源</h3> <p>在类或者Controller的生命周期结束时，往往需要做一些扫尾工作，比如释放资源，停止线程等，这些扫尾工作的释放顺序应当与它们的初始化或者定义的顺序保持一致。这样做是为了方便调试时寻找错误，也能防止遗漏。</p> <h3 id="_9-保证nsstring在赋值时被复制"><a href="#_9-保证nsstring在赋值时被复制" class="header-anchor">#</a> 9. 保证NSString在赋值时被复制</h3> <p><code>NSString</code>非常常用，在它被传递或者赋值时应当保证是以复制（copy）的方式进行的，这样可以防止在不知情的情况下String的值被其它对象修改。</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>setFoo<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>aFoo <span class="token punctuation">{</span>
  _foo <span class="token operator">=</span> <span class="token punctuation">[</span>aFoo copy<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_10-使用nsnumber的语法糖"><a href="#_10-使用nsnumber的语法糖" class="header-anchor">#</a> 10. 使用NSNumber的语法糖</h3> <p>使用带有<code>@</code>符号的语法糖来生成NSNumber对象能使代码更简洁：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code>NSNumber <span class="token operator">*</span>fortyTwo <span class="token operator">=</span> <span class="token operator">@</span><span class="token number">42</span><span class="token punctuation">;</span>
NSNumber <span class="token operator">*</span>piOverTwo <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">(</span>M_PI <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">enum</span> <span class="token punctuation">{</span>
  kMyEnum <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
NSNumber <span class="token operator">*</span>myEnum <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">(</span>kMyEnum<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_11-nil检查"><a href="#_11-nil检查" class="header-anchor">#</a> 11. nil检查</h3> <p>因为在Objective-C中向nil对象发送命令是不会抛出异常或者导致崩溃的，只是完全的“什么都不干”，所以，只在程序中使用nil来做逻辑上的检查。</p> <p>另外，不要使用诸如<code>nil == Object</code>或者<code>Object == nil</code>的形式来判断。</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//正确，直接判断</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>objc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token comment">//错误，不要使用nil == Object的形式</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>nil <span class="token operator">==</span> objc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_12-属性的线程安全"><a href="#_12-属性的线程安全" class="header-anchor">#</a> 12. 属性的线程安全</h3> <p>定义一个属性时，编译器会自动生成线程安全的存取方法（Atomic），但这样会大大降低性能，特别是对于那些需要频繁存取的属性来说，是极大的浪费。所以如果定义的属性不需要线程保护，记得手动添加属性关键字<code>nonatomic</code>来取消编译器的优化。</p> <h3 id="_13-点分语法的使用"><a href="#_13-点分语法的使用" class="header-anchor">#</a> 13. 点分语法的使用</h3> <p>不要用点分语法来调用方法，只用来访问属性。这样是为了防止代码可读性问题。</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">//正确，使用点分语法访问属性</span>
NSString <span class="token operator">*</span>oldName <span class="token operator">=</span> myObject<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
myObject<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">@&quot;Alice&quot;</span><span class="token punctuation">;</span>

<span class="token comment">//错误，不要用点分语法调用方法</span>
NSArray <span class="token operator">*</span>array <span class="token operator">=</span> <span class="token punctuation">[</span>NSArray arrayWithObject<span class="token punctuation">:</span><span class="token string">@&quot;hello&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
NSUInteger numberOfItems <span class="token operator">=</span> array<span class="token punctuation">.</span>count<span class="token punctuation">;</span>
array<span class="token punctuation">.</span>release<span class="token punctuation">;</span>
</code></pre></div><h3 id="_14-delegate要使用弱引用"><a href="#_14-delegate要使用弱引用" class="header-anchor">#</a> 14. Delegate要使用弱引用</h3> <p>一个类的Delegate对象通常还引用着类本身，这样很容易造成引用循环的问题，所以类的Delegate属性要设置为弱引用。</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">/** delegate */</span>
<span class="token keyword">@property</span> <span class="token punctuation">(</span>nonatomic<span class="token punctuation">,</span> weak<span class="token punctuation">)</span> id <span class="token operator">&lt;</span>IPCConnectHandlerDelegate<span class="token operator">&gt;</span> delegate<span class="token punctuation">;</span>
</code></pre></div><hr> <br> <hr> <p>**参考: **</p> <blockquote><p>作者：檀羽冲
标题：iOS团队编程规范
原文：<a href="http://www.jianshu.com/p/21f059f04181" target="_blank" rel="noopener noreferrer">http://www.jianshu.com/p/21f059f04181<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <hr></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ios/00基础知识/1970.html" class="prev">
        时间要从1970年1月1日开始算起？
      </a></span> <span class="next"><a href="/ios/00基础知识/开发流程.html">
        移动终端开发工作流程
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3cc41685.js" defer></script><script src="/assets/js/2.88e857c4.js" defer></script><script src="/assets/js/82.be168e2f.js" defer></script>
  </body>
</html>
