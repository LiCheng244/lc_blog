(window.webpackJsonp=window.webpackJsonp||[]).push([[157],{459:function(e,t,a){"use strict";a.r(t);var s=a(6),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",[e._v("UI 基础面试题 I")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("引言:")])]),e._v(" "),a("br"),e._v(" "),a("h2",{attrs:{id:"_1-frame和bounds有什么不同？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-frame和bounds有什么不同？"}},[e._v("#")]),e._v(" 1. frame和bounds有什么不同？")]),e._v(" "),a("p",[a("code",[e._v("frame")]),e._v("\n指的是：该view在父view坐标系统中的位置和大小。（参照点是父亲的坐标系统）")]),e._v(" "),a("p",[a("code",[e._v("bounds")]),e._v("\n指的是：该view在本身坐标系统中 的位置和大小。（参照点是本身坐标系统）")]),e._v(" "),a("h2",{attrs:{id:"_2-uiview和calayer是什么关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-uiview和calayer是什么关系"}},[e._v("#")]),e._v(" 2. UIView和CALayer是什么关系?")]),e._v(" "),a("p",[a("code",[e._v("UIView")]),e._v("显示在屏幕上归功于"),a("code",[e._v("CALayer")]),e._v("，通过调用"),a("code",[e._v("drawRect")]),e._v("方法来渲染自身的内容，调节CALayer属性可以调整UIView的外观，UIView继承自UIResponder，比起CALayer可以响应用户事件，Xcode6之后可以方便的通过视图调试功能查看图层之间的关系")]),e._v(" "),a("p",[e._v("UIView是iOS系统中界面元素的基础，所有的界面元素都继承自它。它内部是由"),a("code",[e._v("Core Animation")]),e._v("来实现的，它真正的绘图部分，是由一个叫"),a("code",[e._v("CALayer(Core Animation Layer)")]),e._v("的类来管理。UIView本身，更像是一个CALayer的管理器，访问它的跟绘图和坐标有关的属性，如frame，bounds等，实际上内部都是访问它所在CALayer的相关属性")]),e._v(" "),a("p",[e._v("UIView有个layer属性，可以返回它的主CALayer实例，UIView有一个layerClass方法，返回主layer所使用的类，UIView的子类，可以通过重载这个方法，来让UIView使用不同的CALayer来显示，如：")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("- (class) layerClass {\n    // 使某个UIView的子类使用GL来进行绘制\n    return ([CAEAGLLayer class]);\n}\n")])])]),a("p",[e._v("UIView的CALayer类似UIView的子View树形结构，也可以向它的layer上添加子layer，来完成某些特殊的显示。例如下面的代码会在目标View上敷上一层黑色的透明薄膜。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("grayCover = [[CALayer alloc]init];\ngrayCover.backgroudColor = [[UIColor blackColor]colorWithAlphaComponent:0.2].CGColor;\n[self.layer addSubLayer:grayCover];\n")])])]),a("p",[e._v("补充部分，这部分有深度了，大致了解一下吧，UIView的layer树形在系统内部被系统维护着三份copy")]),e._v(" "),a("ul",[a("li",[e._v("逻辑树，就是代码里可以操纵的，例如更改layer的属性等等就在这一份")]),e._v(" "),a("li",[e._v("动画树，这是一个中间层，系统正是在这一层上更改属性，进行各种渲染操作")]),e._v(" "),a("li",[e._v("显示树，这棵树的内容是当前正被显示在屏幕上的内容")])]),e._v(" "),a("p",[e._v("这三棵树的逻辑结构都是一样的，区别只有各自的属性")]),e._v(" "),a("h2",{attrs:{id:"_3-iboutlet连出来的视图属性为什么可以被设置成weak"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-iboutlet连出来的视图属性为什么可以被设置成weak"}},[e._v("#")]),e._v(" 3. IBOutlet连出来的视图属性为什么可以被设置成weak?")]),e._v(" "),a("p",[e._v("因为父控件的subViews数组已经对它有一个强引用.")]),e._v(" "),a("h2",{attrs:{id:"_4-ib中user-defined-runtime-attributes如何使用？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-ib中user-defined-runtime-attributes如何使用？"}},[e._v("#")]),e._v(" 4. IB中User Defined Runtime Attributes如何使用？")]),e._v(" "),a("p",[a("code",[e._v("User Defined Runtime Attributes")]),e._v("是一个不被看重但功能非常强大的的特性，它能够通过KVC的方式配置一些你在interface builder中不能配置的属性\n当你希望在IB中作尽可能多得事情，这个特性能够帮助你编写更加轻量级的 viewcontroller")]),e._v(" "),a("h2",{attrs:{id:"_5-pushviewcontroller和presentviewcontroller有什么区别？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-pushviewcontroller和presentviewcontroller有什么区别？"}},[e._v("#")]),e._v(" 5. pushViewController和presentViewController有什么区别？")]),e._v(" "),a("p",[e._v("两者都是在多个试图控制器间跳转的函数")]),e._v(" "),a("p",[a("code",[e._v("presentViewController")]),e._v("提供的是一个模态视图控制器(modal)\n"),a("code",[e._v("pushViewController")]),e._v("提供一个栈控制器数组，push/pop")]),e._v(" "),a("hr"),e._v(" "),a("h2",{attrs:{id:"_6-请简述uitableview的复用机制？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-请简述uitableview的复用机制？"}},[e._v("#")]),e._v(" 6. 请简述UITableView的复用机制？")]),e._v(" "),a("p",[e._v("每次创建 cell 的时候通过"),a("code",[e._v("dequeueReusableCellWithIdentifier:")]),e._v("方法创建cell，它先到缓存池中找指定标识的cell，如果没有就直接返回nil\n如果没有找到指定标识的cell，那么会通过"),a("code",[e._v("initWithStyle:reuseIdentifier:")]),e._v("创建一个cell\n当cell离开界面就会被放到缓存池中，以供下次复用")]),e._v(" "),a("hr"),e._v(" "),a("h2",{attrs:{id:"_7-使用drawrect有什么影响？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-使用drawrect有什么影响？"}},[e._v("#")]),e._v(" 7. 使用drawRect有什么影响？")]),e._v(" "),a("p",[a("code",[e._v("drawRect")]),e._v("方法依赖Core Graphics框架来进行自定义的绘制")]),e._v(" "),a("p",[a("strong",[e._v("缺点：")]),e._v("\n它处理touch事件时每次按钮被点击后，都会用setNeddsDisplay进行强制重绘；而且不止一次，每次单点事件触发两次执行。这样的话从性能的角度来说，对CPU和内存来说都是欠佳的。特别是如果在我们的界面上有多个这样的UIButton实例，那就会很糟糕了")]),e._v(" "),a("p",[e._v("这个方法的调用机制也是非常特别. 当你调用 "),a("code",[e._v("setNeedsDisplay")]),e._v("方法时, UIKit 将会把当前图层标记为dirty,但还是会显示原来的内容,直到下一次的视图渲染周期,才会将标记为 dirty 的图层重新建立Core Graphics上下文,然后将内存中的数据恢复出来, 再使用 CGContextRef 进行绘制")]),e._v(" "),a("hr"),e._v(" "),a("h2",{attrs:{id:"_8-描述下sdwebimage里面给uiimageview加载图片的逻辑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-描述下sdwebimage里面给uiimageview加载图片的逻辑"}},[e._v("#")]),e._v(" 8. 描述下SDWebImage里面给UIImageView加载图片的逻辑?")]),e._v(" "),a("p",[e._v("SDWebImage 中为 UIImageView 提供了一个分类"),a("code",[e._v("UIImageView+WebCache.h")]),e._v(", 这个分类中有一个最常用的接口"),a("code",[e._v("sd_setImageWithURL:placeholderImage:")]),e._v("，会在真实图片出现前会先显示占位图片，当真实图片被加载出来后在替换占位图片")]),e._v(" "),a("p",[a("strong",[e._v("加载图片的过程大致如下：")])]),e._v(" "),a("ol",[a("li",[e._v("首先会在 SDWebImageCache 中寻找图片是否有对应的缓存, 它会以url 作为数据的索引先在内存中寻找是否有对应的缓存")]),e._v(" "),a("li",[e._v("如果缓存未找到就会利用通过MD5处理过的key来继续在磁盘中查询对应的数据, 如果找到了, 就会把磁盘中的数据加载到内存中，并将图片显示出来")]),e._v(" "),a("li",[e._v("如果在内存和磁盘缓存中都没有找到，就会向远程服务器发送请求，开始下载图片")]),e._v(" "),a("li",[e._v("下载后的图片会加入缓存中，并写入磁盘中")])]),e._v(" "),a("p",[e._v("整个获取图片的过程都是在子线程中执行，获取到图片后回到主线程将图片显示出来")]),e._v(" "),a("hr"),e._v(" "),a("h2",{attrs:{id:"_9-你是怎么封装一个-view-的？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-你是怎么封装一个-view-的？"}},[e._v("#")]),e._v(" 9. 你是怎么封装一个 view 的？")]),e._v(" "),a("p",[e._v("可以通过纯代码或者xib的方式来封装子控件, 建立一个跟view相关的模型，然后将模型数据传给view，通过模型上的数据给view的子控件赋值")]),e._v(" "),a("div",{staticClass:"language-objectivec extra-class"},[a("pre",{pre:!0,attrs:{class:"language-objectivec"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//  纯代码初始化控件时一定会走这个方法")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("instancetype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("initWithFrame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("CGRect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("frame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("self")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("super")]),e._v(" initWithFrame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("frame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("self")]),e._v(" setup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//  通过xib初始化控件时一定会走这个方法")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("initWithCoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("NSCoder "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("aDecoder "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("self")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("super")]),e._v(" initWithCoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("aDecoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("self")]),e._v(" setup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("setup "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// 初始化代码")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("h2",{attrs:{id:"_10-如何进行系统版本的适配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-如何进行系统版本的适配"}},[e._v("#")]),e._v(" 10. 如何进行系统版本的适配?")]),e._v(" "),a("p",[e._v("通过判断版本来控制，来执行响应的代码")]),e._v(" "),a("p",[a("strong",[e._v("功能适配：")]),e._v(" 保证同一个功能在8、9上都能用\n"),a("strong",[e._v("UI适配：")]),e._v(" 保证各自的显示风格\n"),a("strong",[e._v("版本号判断：")]),e._v(" "),a("code",[e._v("#define iOS8 ([[UIDevice currentDevice].systemVersion doubleValue]>=8.0)")])]),e._v(" "),a("h2",{attrs:{id:"_11-uiscrollview的contentsize能否在viewdidload中设置？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-uiscrollview的contentsize能否在viewdidload中设置？"}},[e._v("#")]),e._v(" 11. UIScrollView的contentSize能否在viewDidLoad中设置？")]),e._v(" "),a("p",[e._v("可以。因为UIScrollView的内容尺寸是根据其内部的内容来决定的，所以是可以在viewDidLoad中设置的.")]),e._v(" "),a("p",[a("strong",[e._v("补充：（这仅仅是一种特殊情况）")]),e._v("\n前提，控制器B是控制器A的一个子控制器，且控制器B的内容只在控制器A的view的部分区域中显示假设控制器B的view中有一个UIScrollView这样一个子控件")]),e._v(" "),a("p",[e._v("如果此时在控制器B的viewDidLoad中设置UIScrollView的contentSize的话会导致不准确的问题\n因为任何控制器的view在viewDidLoad的时候的尺寸都是不准确的，如果有子控件的尺寸依赖父控件的尺寸，在这个方法中设置会导致子控件的frame不准确，所以这时应该在下面的方法中设置子控件的尺寸 "),a("code",[e._v("-(void)viewDidLayoutSubviews;")])]),e._v(" "),a("h2",{attrs:{id:"_12-触摸事件的传递？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_12-触摸事件的传递？"}},[e._v("#")]),e._v(" 12. 触摸事件的传递？")]),e._v(" "),a("p",[e._v("触摸事件的传递是从父控件传递到子控件, 如果父控件不能接收触摸事件，那么子控件就不可能接收到触摸事件")]),e._v(" "),a("p",[a("strong",[e._v("不能接受触摸事件的四种情况:")])]),e._v(" "),a("ol",[a("li",[a("code",[e._v("不接收用户交互")]),e._v("，即：userInteractionEnabled = NO;")]),e._v(" "),a("li",[a("code",[e._v("隐藏")]),e._v("，即：hidden = YES;")]),e._v(" "),a("li",[a("code",[e._v("透明")]),e._v("，即：alpha <= 0.01;")]),e._v(" "),a("li",[a("code",[e._v("未启用")]),e._v("，即：enabled = NO;")])]),e._v(" "),a("p",[a("strong",[e._v("如何找到最合适处理事件的控件：")])]),e._v(" "),a("ol",[a("li",[e._v("首先，判断自己能否接收触摸事件, 可以通过重写"),a("code",[e._v("hitTest:withEvent:")]),e._v("方法验证")]),e._v(" "),a("li",[e._v("其次，判断触摸点是否在自己身上, 对应方法"),a("code",[e._v("pointInside:withEvent:")])]),e._v(" "),a("li",[e._v("从后往前(先遍历最后添加的子控件)遍历子控件，重复前面的两个步骤")]),e._v(" "),a("li",[e._v("如果没有符合条件的子控件，那么就自己处理")])]),e._v(" "),a("p",[a("strong",[e._v("提示:")])]),e._v(" "),a("p",[a("code",[e._v("UIImageView")]),e._v(" 的 "),a("code",[e._v("userInteractionEnabled")]),e._v(" 默认就是NO，因此"),a("code",[e._v("UIImageView")]),e._v(" 以及它的子控件默认是不能接收触摸事件的")]),e._v(" "),a("h2",{attrs:{id:"_13-关于事件响应者链"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_13-关于事件响应者链"}},[e._v("#")]),e._v(" 13. 关于事件响应者链?")]),e._v(" "),a("ul",[a("li",[e._v("如果当前view是控制器的view，那么就传递给控制器")]),e._v(" "),a("li",[e._v("如果控制器不存在，则将其传递给它的父控件")]),e._v(" "),a("li",[e._v("在视图层次结构的最顶层视图也不能处理接收到的事件或消息，则将事件或消息传递给UIWindow对象进行处理")]),e._v(" "),a("li",[e._v("如果UIWindow对象也不处理，则将事件或消息传递给UIApplication对象")]),e._v(" "),a("li",[e._v("如果UIApplication也不能处理该事件或消息，则将其丢弃")])]),e._v(" "),a("p",[a("strong",[e._v("补充：如何判断上一个响应者:")])]),e._v(" "),a("ol",[a("li",[e._v("如果当前这个view是控制器的view，那么"),a("code",[e._v("控制器")]),e._v("就是上一个响应者")]),e._v(" "),a("li",[e._v("如果当前这个view不是控制器的view，那么"),a("code",[e._v("父控件")]),e._v("就是上一个响应者")])]),e._v(" "),a("p",[a("img",{attrs:{src:"http://ogewbn1ek.bkt.clouddn.com/xiangyingzhelian.png",alt:""}})]),e._v(" "),a("h2",{attrs:{id:"_14-loadview的作用？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_14-loadview的作用？"}},[e._v("#")]),e._v(" 14. loadView的作用？")]),e._v(" "),a("p",[e._v("loadView用来自定义view，只要实现了这个方法，其他通过xib或storyboard创建的view都不会被加载")]),e._v(" "),a("p",[e._v("看懂控制器view创建的这个图就行 :")]),e._v(" "),a("p",[a("img",{attrs:{src:"http://ogewbn1ek.bkt.clouddn.com/1BA708AD-5018-462F-8F23-48475734B7D1.png",alt:""}})]),e._v(" "),a("br")])}),[],!1,null,null,null);t.default=r.exports}}]);