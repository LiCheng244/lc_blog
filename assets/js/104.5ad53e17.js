(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{524:function(a,e,t){"use strict";t.r(e);var o=t(6),s=Object(o.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",[a._v("脚本组件的生命周期")]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("前言")]),a._v(" "),t("p",[a._v("脚本组件的生与死-生命周期回调时机")])]),a._v(" "),t("br"),a._v(" "),t("h2",{attrs:{id:"一-生命周期"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-生命周期"}},[a._v("#")]),a._v(" 一. 生命周期")]),a._v(" "),t("p",[a._v("一个组件从初始化到激活，再到最终销毁的完整生命周期函数调用顺序为：")]),a._v(" "),t("p",[t("code",[a._v("onLoad → onEnable → start → update → lateUpdate → onDisable → onDestroy")])]),a._v(" "),t("p",[a._v("脚本组件的存在依赖于节点，但其生命周期是独立存在的, 也就是说当节点创建（"),t("code",[a._v("parent")]),a._v("），激活（"),t("code",[a._v("active")]),a._v("）和销毁（"),t("code",[a._v("destroy")]),a._v("）时，会触发该节点上脚本组件的生命周期，但当节点操作脚本组件，创建（"),t("code",[a._v("addComponent")]),a._v("），激活（"),t("code",[a._v("enabled")]),a._v("）和销毁（"),t("code",[a._v("removeComponent")]),a._v("）时，也会触发脚本组件完整的生命周期。")]),a._v(" "),t("h3",{attrs:{id:"onload"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#onload"}},[a._v("#")]),a._v(" "),t("code",[a._v("onLoad")])]),a._v(" "),t("p",[a._v("脚本组件的初始化阶段，当脚本组件所在节点首次激活时，或者节点处于激活状态下，脚本组件被挂载到节点（addComponent）时触发")]),a._v(" "),t("h3",{attrs:{id:"onenable"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#onenable"}},[a._v("#")]),a._v(" "),t("code",[a._v("onEnable")])]),a._v(" "),t("p",[a._v("当脚本组件的 enabled 属性从 false 变为 true 时，或者所在节点的 active 属性从 false 变为 true 时触发")]),a._v(" "),t("h3",{attrs:{id:"start"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#start"}},[a._v("#")]),a._v(" "),t("code",[a._v("start")])]),a._v(" "),t("p",[a._v("在脚本组件第一次激活前，也就是第一次执行 update 之前触发")]),a._v(" "),t("h3",{attrs:{id:"update"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#update"}},[a._v("#")]),a._v(" "),t("code",[a._v("update")])]),a._v(" "),t("p",[a._v("游戏开发的一个关键点是在每一帧渲染前更新物体的行为，状态和方位。这些更新操作通常都放在 update 回调中")]),a._v(" "),t("h3",{attrs:{id:"lateupdate"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lateupdate"}},[a._v("#")]),a._v(" "),t("code",[a._v("lateUpdate")])]),a._v(" "),t("p",[a._v("update 会在所有动画更新前执行，但如果我们要在动效（如动画、粒子、物理等）更新之后才进行一些额外操作，或者希望在所有组件的 update 都执行完之后才进行其它操作，那就需要用到 lateUpdate 回调")]),a._v(" "),t("h3",{attrs:{id:"ondisable"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ondisable"}},[a._v("#")]),a._v(" "),t("code",[a._v("onDisable")])]),a._v(" "),t("p",[a._v("当脚本组件的 enabled 属性从 true 变为 false 时，或者所在节点的 active 属性从 true 变为 false 时，或者该脚本组件被移除（removeComponent）时触发")]),a._v(" "),t("h3",{attrs:{id:"ondestroy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ondestroy"}},[a._v("#")]),a._v(" "),t("code",[a._v("onDestroy")])]),a._v(" "),t("p",[a._v("当脚本组件或者所在节点调用了 destroy() 时 ，或者该脚本组件被移除（removeComponent）时触发，并在当帧结束时统一回收组件")]),a._v(" "),t("br"),a._v(" "),t("h2",{attrs:{id:"二-nodepool中的生命周期"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-nodepool中的生命周期"}},[a._v("#")]),a._v(" 二. NodePool中的生命周期")]),a._v(" "),t("p",[a._v("当节点在 NodePool 中时:")]),a._v(" "),t("h3",{attrs:{id:"onload、start"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#onload、start"}},[a._v("#")]),a._v(" "),t("code",[a._v("onLoad")]),a._v("、"),t("code",[a._v("start")])]),a._v(" "),t("p",[a._v("只会在节点第一次从 NodePool 中取出时触发")]),a._v(" "),t("h3",{attrs:{id:"onenable-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#onenable-2"}},[a._v("#")]),a._v(" "),t("code",[a._v("onEnable")])]),a._v(" "),t("p",[a._v("当节点从 NodePool 中取出时触发")]),a._v(" "),t("h3",{attrs:{id:"ondisable-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ondisable-2"}},[a._v("#")]),a._v(" "),t("code",[a._v("onDisable")])]),a._v(" "),t("p",[a._v("当节点被放回 NodePool 时触发")]),a._v(" "),t("h3",{attrs:{id:"ondestroy-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ondestroy-2"}},[a._v("#")]),a._v(" "),t("code",[a._v("onDestroy")])]),a._v(" "),t("p",[a._v("当 NodePool 被 clear 时触发")]),a._v(" "),t("p",[a._v("在 NodePool  中也可以使用 unuse 和 reuse 函数")])])}),[],!1,null,null,null);e.default=s.exports}}]);