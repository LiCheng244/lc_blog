(window.webpackJsonp=window.webpackJsonp||[]).push([[162],{594:function(t,s,a){"use strict";a.r(s);var n=a(6),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",[t._v("自动识别剪贴板内容")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("引言:")]),t._v(" "),a("p",[t._v("之前用淘宝给微信好友分享链接的时候，发现在微信中复制了宝贝的链接，然后再从后台切换到淘宝客户端，淘宝就会弹出一个页面，询问是否要跳转到相关页面，今天试着实现了一下，分享出来~")])]),t._v(" "),a("br"),t._v(" "),a("h2",{attrs:{id:"一-代码实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-代码实现"}},[t._v("#")]),t._v(" 一. 代码实现")]),t._v(" "),a("div",{staticClass:"language-objectivec extra-class"},[a("pre",{pre:!0,attrs:{class:"language-objectivec"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("getPasteboardString "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取剪切板信息")]),t._v("\n    NSString "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("str "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("UIPasteboard generalPasteboard"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 做相应处理")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("str hasPrefix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("@")]),t._v('"http'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//"] || [str hasPrefix:@"https://"]) {')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("NSLog")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('@"自己想要的内容"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("NSLog")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('@"不是自己想要的内容"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("获取设备的剪贴板很简单，第一行代码就搞定了，if 语句中判断了一下剪贴板中的内容是不是链接，注意http和https都要写上，这点很容易被忽略（在浏览器地址栏中复制以www.开头的文本会自动在剪贴板中转为http或https开头的链接）。")]),t._v(" "),a("br"),t._v(" "),a("h2",{attrs:{id:"二-调用时机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二-调用时机"}},[t._v("#")]),t._v(" 二. 调用时机")]),t._v(" "),a("p",[t._v("对比"),a("code",[t._v("applicationWillEnterForeground")]),t._v("和 "),a("code",[t._v("applicationDidBecomeActive")]),t._v(" 这两个方法，前者是指 App从后台进入前台，后者是指 App处于活跃状态，所以前者相对于后者，缺少的部分是，当 App 刚刚启动，而不是从后台取出的时候，它无法识别剪贴板。")]),t._v(" "),a("p",[t._v("因为你不能要求每次都让用户先把 App 打开，再往剪贴板里面填东西，再跳转回来，所以个人建议把上面的代码放在 "),a("code",[t._v("applicationDidBecomeActive")]),t._v(" 方法中，而不是 applicationWillEnterForeground 。")]),t._v(" "),a("br")])}),[],!1,null,null,null);s.default=e.exports}}]);