(window.webpackJsonp=window.webpackJsonp||[]).push([[190],{622:function(e,v,t){"use strict";t.r(v);var _=t(6),r=Object(_.a)({},(function(){var e=this,v=e.$createElement,t=e._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",[e._v("字节跳动是这样做 Code Review 的")]),e._v(" "),t("br"),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("前言")]),e._v(" "),t("p",[e._v("众所周知，Code Review是开发过程中一个非常重要的环节，但是很多公司或者团队是没有这一环节的，今天笔者结合自己所在团队，浅谈Code Review的价值及如何实施。")])]),e._v(" "),t("br"),e._v(" "),t("h2",{attrs:{id:"一-code-review的价值"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-code-review的价值"}},[e._v("#")]),e._v(" 一. Code Review的价值")]),e._v(" "),t("p",[e._v("许多团队没有Code Review环节，或者因为追求项目快速上线，认为CR浪费时间；或者团队成员缺少CR观念，认为CR的价值并不大。所以想要推动CR在团队中的实施，最最重要的一点便是增强团队成员对CR环节的认同感。")]),e._v(" "),t("p",[e._v("Code Review环节，它更加依赖于团队成员的主观能动性，只有团队成员对其认可，他们才会积极地参入这一环节，CR的价值才能最大化的体现。如果团队成员不认可CR，即使强制设置了CR流程，也是形同虚设，反而可能阻碍正常开发流程的效率。那么如何让团队成员认可CR环节呢，自然是让他们意识到CR的价值，然后就会……真香！")]),e._v(" "),t("h3",{attrs:{id:"_1-提升团队代码质量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-提升团队代码质量"}},[e._v("#")]),e._v(" 1. 提升团队代码质量")]),e._v(" "),t("p",[e._v("随着团队规模的扩大和项目的迭代升级，团队之间的信息透明度会越来越低，项目的可维护性也会越来越差，可能引发如下一系列问题：")]),e._v(" "),t("ul",[t("li",[e._v("已有的utils方法，重复造轮子")]),e._v(" "),t("li",[e._v("代码过于复杂，缺少必要注释，后人难以维护")]),e._v(" "),t("li",[e._v("目录结构五花八门，杂乱不堪")]),e._v(" "),t("li",[e._v("……")])]),e._v(" "),t("p",[t("code",[e._v("『 合理的CR环节，可以有效地把控每次提交的代码质量，不至于让项目的可维护性随着版本迭代和时间推移变得太差，这也是CR的首要目的 』")]),e._v("。CR环节并不会降低开发效率，就一次代码提交来说，也许部分人认为CR可能花费了时间，但是有效的CR给后人扩展和维护时所节省的时间是远超于此的。")]),e._v(" "),t("h3",{attrs:{id:"_2-团队技术交流"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-团队技术交流"}},[e._v("#")]),e._v(" 2. 团队技术交流")]),e._v(" "),t("p",[t("code",[e._v("Reviewer")]),e._v(" 和 "),t("code",[e._v("Reviewee")]),e._v("，在参与CR的过程中，都是可以收获到许多知识，进行技术交流的。")]),e._v(" "),t("ul",[t("li",[e._v("有利于帮助新人快速成长，团队有新人加入时（如实习生和校招生），往往需要以为导师带领一段时间，通过CR环节，可以使导师最直接的了解到新人开发过程中所遇到的问题，作出相应的指导。")]),e._v(" "),t("li",[e._v("通过CR环节，团队成员可以了解他人的业务，而不局限于自己的所负责的业务范围。项目发现问题时，可以迅速定位到相关业务的负责人进行修改。同时若有的团队成员离职后，也可以减少业务一人负责所带来的后期维护困难。")]),e._v(" "),t("li",[e._v("学习他人的优秀代码。通过CR环节，可以迅速接触到团队成员在项目中解决某些问题的优秀代码，或者使用的一些你所未接触过的一些api等。")])]),e._v(" "),t("h3",{attrs:{id:"_3-保证项目的统一规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-保证项目的统一规范"}},[e._v("#")]),e._v(" 3. 保证项目的统一规范")]),e._v(" "),t("p",[t("code",[e._v("『 既然要进行CR，首先要对项目的规范制定要求，包括编码风格规范、目录结构规范、业务规范等等 』")]),e._v("。一方面，统一的项目规范才能保证项目的代码质量，提高项目的质量和可维护性；另一方面，在大家熟悉了统一的规范后，能够提升CR的效率，节省时间。")]),e._v(" "),t("br"),e._v(" "),t("h2",{attrs:{id:"二-code-review的实践"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-code-review的实践"}},[e._v("#")]),e._v(" 二. Code Review的实践")]),e._v(" "),t("p",[e._v("关于Code Review的实践，要考虑的包括CR所花费的时间、CR的形式、何时进行CR等等。")]),e._v(" "),t("h3",{attrs:{id:"_1-预留cr的时间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-预留cr的时间"}},[e._v("#")]),e._v(" 1. 预留CR的时间")]),e._v(" "),t("p",[e._v("首先不得不承认，CR环节是要耗费一定时间的，所以在项目排期中，不仅要考虑开发、联调、提测、改bug等时间，还要预留出CR的时间。包括担任Reviewer和Reviewee角色的时间都要考虑。")]),e._v(" "),t("p",[e._v("另外如果遇到的需求比较复杂，为了避免因为CR过程导致代码需要大量修改，最好提前和团队成员沟通好需求的设计和结果思路。")]),e._v(" "),t("h3",{attrs:{id:"_2-cr的形式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-cr的形式"}},[e._v("#")]),e._v(" 2. CR的形式")]),e._v(" "),t("p",[e._v("我所见过的CR大多有两种形式。一种是设立一个特定时间，例如每周或者每半月等等，团队成员一起对之前的Merge Request进行CR；另一种是对每次的Merge Request都进行CR。")]),e._v(" "),t("p",[e._v("我个人更偏向于后者。第一种定期CR，Merge Request的数量太多，不太可能对所有的MR进行CR，如果CR之后再对之前的诸多MR进行修改成本太大；而且一次性太多的CR会打击团队成员的积极性。第二种MR相对就轻松的多，可以考虑轮班每天设置2-3人对当天的MR进行CR即可。")]),e._v(" "),t("h3",{attrs:{id:"_3-cr的时机"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-cr的时机"}},[e._v("#")]),e._v(" 3. CR的时机")]),e._v(" "),t("p",[e._v("CR的环节应该设立在提测环节之前。因为CR后如果优化代码虽然理论上只是代码优化，但很可能会对业务逻辑产生影响，如果在提测时候，那么可能会影响到已经测试过的功能点。")]),e._v(" "),t("p",[e._v("当然也要分情况，如果遇到比较紧急的需求或者bug修复，那么也可以先提测，后续再做相应的CR。")]),e._v(" "),t("br"),e._v(" "),t("h2",{attrs:{id:"三-对团队成员要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三-对团队成员要求"}},[e._v("#")]),e._v(" 三. 对团队成员要求")]),e._v(" "),t("p",[e._v("前面已经提到，要增强团队成员对CR环节的认同感。作为CR环节的参与者，还应该根据自己的团队特点，对团队成员做出相应要求，可以参考我们团队。")]),e._v(" "),t("h3",{attrs:{id:"_1-reviewer-评论者"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-reviewer-评论者"}},[e._v("#")]),e._v(" 1. Reviewer(评论者)")]),e._v(" "),t("p",[e._v("指明review的级别。reviewer再给相应的代码添加评论时，建议指明评论的级别，可以在评论前用[]作出标识，例如：")]),e._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("xxxxxxx　　　　　　　此条评论的代码必须修改才能予以通过\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("advise"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("xxxxxxxx　　　　　　　此条评论的代码建议修改，但不修改也可以通过\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("question"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("xxxxxx　　　　　　　此条评论的代码有疑问，需reviewee进一步解释\n")])])]),t("p",[e._v("讲明该评论的原因。在对代码做出评论时，应当解释清楚原因，如果自己有现成的更好地解决思路，应该把相应的解决思路也评论上，节省reviewee的修改时间。")]),e._v(" "),t("p",[e._v("平等友善的评论。评论者在review的过程中，目的是提升项目代码质量，而不是抨击别人，质疑别人的能力，应该保持平等友善的语气。")]),e._v(" "),t("p",[e._v("享受Code Review。只有积极的参与CR，把CR作为一种享受，才能将CR的价值最大化的体现。")]),e._v(" "),t("h3",{attrs:{id:"_2-reviewee-被评论者"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-reviewee-被评论者"}},[e._v("#")]),e._v(" 2. Reviewee(被评论者)")]),e._v(" "),t("p",[e._v("注重注释。对于复杂代码写明相应注释，在进行commit时也应简明的写清楚背景，帮助reviewer理解，提高review的效率。")]),e._v(" "),t("p",[e._v("保持乐观的心态接受别人的review。团队成员的review不是对你的批判，而是帮助你的提升，所以要尊重别人的review，如果review你感觉不正确，可以在下面提出疑问，进一步解释。")]),e._v(" "),t("p",[e._v("完成相应review的修改应当在下面及时进行回复，保持信息同步。")]),e._v(" "),t("hr"),e._v(" "),t("br"),e._v(" "),t("br"),e._v(" "),t("blockquote",[t("p",[e._v("作者： 梨香")]),e._v(" "),t("p",[e._v("来源： 小黄鸭编程社区")]),e._v(" "),t("p",[e._v("链接："),t("a",{attrs:{href:"https://juejin.im/post/6882333635203039239",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://juejin.im/post/6882333635203039239"),t("OutboundLink")],1)]),e._v(" "),t("br"),e._v(" "),t("p",[e._v("著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。")])]),e._v(" "),t("br"),e._v(" "),t("br")])}),[],!1,null,null,null);v.default=r.exports}}]);